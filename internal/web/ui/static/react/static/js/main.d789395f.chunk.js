(this.webpackJsonpgraph=this.webpackJsonpgraph||[]).push([[0],{140:function(e,t){},146:function(e,t){},170:function(e,t,a){e.exports={discovered:"TargetLabels_discovered__2eSl4"}},175:function(e,t,a){e.exports=a(294)},233:function(e,t){},251:function(e,t){},271:function(e,t){!function(e){e.color={},e.color.make=function(t,a,n,r){var o={};return o.r=t||0,o.g=a||0,o.b=n||0,o.a=null!=r?r:1,o.add=function(e,t){for(var a=0;a<e.length;++a)o[e.charAt(a)]+=t;return o.normalize()},o.scale=function(e,t){for(var a=0;a<e.length;++a)o[e.charAt(a)]*=t;return o.normalize()},o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"},o.normalize=function(){function e(e,t,a){return t<e?e:t>a?a:t}return o.r=e(0,parseInt(o.r),255),o.g=e(0,parseInt(o.g),255),o.b=e(0,parseInt(o.b),255),o.a=e(0,o.a,1),o},o.clone=function(){return e.color.make(o.r,o.b,o.g,o.a)},o.normalize()},e.color.extract=function(t,a){var n;do{if(""!=(n=t.css(a).toLowerCase())&&"transparent"!=n)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),e.color.parse(n)},e.color.parse=function(a){var n,r=e.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))return r(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return r(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))return r(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return r(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))return r(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))return r(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var o=e.trim(a).toLowerCase();return"transparent"==o?r(255,255,255,0):r((n=t[o]||[0,0,0])[0],n[1],n[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(window.jQuery),function(e){var t=Object.prototype.hasOwnProperty;function a(t,a){var n=a.children("."+t)[0];if(null==n&&((n=document.createElement("canvas")).className=t,e(n).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(a),!n.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");n=window.G_vmlCanvasManager.initElement(n)}this.element=n;var r=this.context=n.getContext("2d"),o=window.devicePixelRatio||1,i=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;this.pixelRatio=o/i,this.resize(a.width(),a.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}function n(t,n,r,o){var i=[],l={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},s=null,c=null,u=null,m=null,p=null,d=[],h=[],f={left:0,right:0,top:0,bottom:0},g=0,b=0,v={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},x=this;function E(e,t){t=[x].concat(t);for(var a=0;a<e.length;++a)e[a].apply(this,t)}function y(t){i=function(t){for(var a=[],n=0;n<t.length;++n){var r=e.extend(!0,{},l.series);null!=t[n].data?(r.data=t[n].data,delete t[n].data,e.extend(!0,r,t[n]),t[n].data=r.data):r.data=t[n],a.push(r)}return a}(t),function(){var t,a=i.length,n=-1;for(t=0;t<i.length;++t){var r=i[t].color;null!=r&&(a--,"number"==typeof r&&r>n&&(n=r))}a<=n&&(a=n+1);var o,s=[],c=l.colors,u=c.length,m=0;for(t=0;t<a;t++)o=e.color.parse(c[t%u]||"#666"),t%u==0&&t&&(m=m>=0?m<.5?-m-.2:0:-m),s[t]=o.scale("rgb",1+m);var p,f=0;for(t=0;t<i.length;++t){if(null==(p=i[t]).color?(p.color=s[f].toString(),++f):"number"==typeof p.color&&(p.color=s[p.color].toString()),null==p.lines.show){var g,b=!0;for(g in p)if(p[g]&&p[g].show){b=!1;break}b&&(p.lines.show=!0)}null==p.lines.zero&&(p.lines.zero=!!p.lines.fill),p.xaxis=O(d,k(p,"x")),p.yaxis=O(h,k(p,"y"))}}(),function(){var t,a,n,r,o,l,s,c,u,m,p,d,h=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.MAX_VALUE;function b(e,t,a){t<e.datamin&&t!=-g&&(e.datamin=t),a>e.datamax&&a!=g&&(e.datamax=a)}for(e.each(w(),(function(e,t){t.datamin=h,t.datamax=f,t.used=!1})),t=0;t<i.length;++t)(o=i[t]).datapoints={points:[]},E(v.processRawData,[o,o.data,o.datapoints]);for(t=0;t<i.length;++t){if(o=i[t],p=o.data,!(d=o.datapoints.format)){if((d=[]).push({x:!0,number:!0,required:!0}),d.push({y:!0,number:!0,required:!0}),o.stack||o.bars.show||o.lines.show&&o.lines.fill){var x=!!(o.bars.show&&o.bars.zero||o.lines.show&&o.lines.zero);d.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),o.bars.horizontal&&(delete d[d.length-1].y,d[d.length-1].x=!0)}o.datapoints.format=d}if(null==o.datapoints.pointsize){o.datapoints.pointsize=d.length,s=o.datapoints.pointsize,l=o.datapoints.points;var y=o.lines.show&&o.lines.steps;for(o.xaxis.used=o.yaxis.used=!0,a=n=0;a<p.length;++a,n+=s){var k=null==(m=p[a]);if(!k)for(r=0;r<s;++r)c=m[r],(u=d[r])&&(u.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=g:c==-1/0&&(c=-g)),null==c&&(u.required&&(k=!0),null!=u.defaultValue&&(c=u.defaultValue))),l[n+r]=c;if(k)for(r=0;r<s;++r)null!=(c=l[n+r])&&!1!==(u=d[r]).autoscale&&(u.x&&b(o.xaxis,c,c),u.y&&b(o.yaxis,c,c)),l[n+r]=null;if(y&&n>0&&(!k||null!=l[n-s])){for(r=0;r<s;++r)l[n+s+r]=l[n+r];l[n+1]=l[n-s+1]||0,k&&(l[n]=m[0]),n+=s}}}}for(t=0;t<i.length;++t){if(o=i[t],l=o.datapoints.points,s=o.datapoints.pointsize,"negative-Y"===o.transform)for(a=0;a<l.length;a+=s)null!=l[a]&&(c=l[a+1],l[a+1]=-c);E(v.processDatapoints,[o,o.datapoints])}for(t=0;t<i.length;++t){o=i[t],l=o.datapoints.points,s=o.datapoints.pointsize,d=o.datapoints.format;var S=h,O=h,C=f,j=f;for(a=0;a<l.length;a+=s)if(null!=l[a])for(r=0;r<s;++r)c=l[a+r],(u=d[r])&&!1!==u.autoscale&&c!=g&&c!=-g&&(u.x&&(c<S&&(S=c),c>C&&(C=c)),u.y&&(c<O&&(O=c),c>j&&(j=c)));if(o.bars.show){var T;switch(o.bars.align){case"left":T=0;break;case"right":T=-o.bars.barWidth;break;default:T=-o.bars.barWidth/2}o.bars.horizontal?(O+=T,j+=T+o.bars.barWidth):(S+=T,C+=T+o.bars.barWidth)}b(o.xaxis,S,C),b(o.yaxis,O,j)}e.each(w(),(function(e,t){t.datamin==h&&(t.datamin=null),t.datamax==f&&(t.datamax=null)}))}()}function k(e,t){var a=e[t+"axis"];return"object"==typeof a&&(a=a.n),"number"!=typeof a&&(a=1),a}function w(){return e.grep(d.concat(h),(function(e){return e}))}function S(e){var t,a,n={};for(t=0;t<d.length;++t)(a=d[t])&&(n["x"+a.n]=a.c2p(e.left));for(t=0;t<h.length;++t)(a=h[t])&&(n["y"+a.n]=a.c2p(e.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function O(t,a){return t[a-1]||(t[a-1]={n:a,direction:t==d?"x":"y",options:e.extend(!0,{},t==d?l.xaxis:l.yaxis)}),t[a-1]}function C(){H&&clearTimeout(H),u.unbind("mousemove",q),u.unbind("mouseleave",U),u.unbind("click",B),E(v.shutdown,[u])}function j(e){for(var t=e.options,a=e.ticks||[],n=t.labelWidth||0,r=t.labelHeight||0,o=n||("x"==e.direction?Math.floor(s.width/(a.length||1)):null),i=e.direction+"Axis "+e.direction+e.n+"Axis",l="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+i,c=t.font||"flot-tick-label tickLabel",u=0;u<a.length;++u){var m=a[u];if(m.label){var p=s.getTextInfo(l,m.label,c,null,o);n=Math.max(n,p.width+1),r=Math.max(r,p.height)}}e.labelWidth=t.labelWidth||n,e.labelHeight=t.labelHeight||r}function T(t){var a=t.labelWidth,n=t.labelHeight,r=t.options.position,o="x"===t.direction,i=t.options.tickLength,c=l.grid.axisMargin,u=l.grid.labelMargin,m=l.grid.eventSectionHeight,p=!0,g=!0,b=!0,v=!1;e.each(o?d:h,(function(e,a){a&&(a.show||a.reserveSpace)&&(a===t?v=!0:a.options.position===r&&(v?g=!1:p=!1),v||(b=!1))})),g&&(c=0),null==i&&(i=b?"full":5),isNaN(+i)||(u+=+i),o?(n+=u,n+=m,"bottom"==r?(f.bottom+=n+c,t.box={top:s.height-f.bottom,height:n}):(t.box={top:f.top+c,height:n},f.top+=n+c)):(a+=u,"left"==r?(t.box={left:f.left+c,width:a},f.left+=a+c):(f.right+=a+c,t.box={left:s.width-f.right,width:a})),t.position=r,t.tickLength=i,t.box.padding=u,t.box.eventSectionPadding=m,t.innermost=p}function M(){var a,n,r=w(),o=l.grid.show;for(var c in f){var u=l.grid.margin||0;f[c]="number"==typeof u?u:u[c]||0}for(var c in E(v.processOffset,[f]),f)"object"==typeof l.grid.borderWidth?f[c]+=o?l.grid.borderWidth[c]:0:f[c]+=o?l.grid.borderWidth:0;(e.each(r,(function(e,t){var a=t.options;t.show=null==a.show?t.used:a.show,t.reserveSpace=null==a.reserveSpace?t.show:a.reserveSpace,function(e){var t=e.options,a=+(null!=t.min?t.min:e.datamin),n=+(null!=t.max?t.max:e.datamax),r=n-a;if(0==r){var o=Math.abs(0==n?1:.25*n);null==t.min&&(a-=o),null!=t.max&&null==t.min||(n+=o)}else{var i=t.autoscaleMargin;null!=i&&(null==t.min&&(a-=r*i)<0&&null!=e.datamin&&e.datamin>=0&&(a=0),null==t.max&&(n+=r*i)>0&&null!=e.datamax&&e.datamax<=0&&(n=0))}e.min=a,e.max=n}(t)})),E(v.processRange,[]),o)&&function(){a=e.grep(r,(function(e){return e.show||e.reserveSpace}));var t=!1;for(n=0;n<2&&(e.each(a,(function(e,a){N(a),L(a),t=I(a,a.ticks)||t,j(a)})),t&&v.processRange.length>0);n++)E(v.processRange,[]),t=!1;for(n=a.length-1;n>=0;--n)T(a[n]);!function(){var t,a=l.grid.minBorderMargin;if(null==a)for(a=0,t=0;t<i.length;++t)a=Math.max(a,2*(i[t].points.radius+i[t].points.lineWidth/2));var n={left:a,right:a,top:a,bottom:a};e.each(w(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(n.left=Math.max(n.left,t.labelWidth/2),n.right=Math.max(n.right,t.labelWidth/2)):(n.bottom=Math.max(n.bottom,t.labelHeight/2),n.top=Math.max(n.top,t.labelHeight/2)))})),f.left=Math.ceil(Math.max(n.left,f.left)),f.right=Math.ceil(Math.max(n.right,f.right)),f.top=Math.ceil(Math.max(n.top,f.top)),f.bottom=Math.ceil(Math.max(n.bottom,f.bottom))}(),e.each(a,(function(e,t){!function(e){"x"==e.direction?(e.box.left=f.left-e.labelWidth/2,e.box.width=s.width-f.left-f.right+e.labelWidth):(e.box.top=f.top-e.labelHeight/2,e.box.height=s.height-f.bottom-f.top+e.labelHeight)}(t)}))}();g=s.width-f.left-f.right,b=s.height-f.bottom-f.top,e.each(r,(function(e,t){!function(e){function t(e){return e}var a,n,r=e.options.transform||t,o=e.options.inverseTransform;"x"==e.direction?(a=e.scale=g/Math.abs(r(e.max)-r(e.min)),n=Math.min(r(e.max),r(e.min))):(a=-(a=e.scale=b/Math.abs(r(e.max)-r(e.min))),n=Math.max(r(e.max),r(e.min))),e.p2c=r==t?function(e){return(e-n)*a}:function(e){return(r(e)-n)*a},e.c2p=o?function(e){return o(n+e/a)}:function(e){return n+e/a}}(t)})),o&&e.each(w(),(function(e,t){var a,n,r,o,i,l=t.box,c=t.direction+"Axis "+t.direction+t.n+"Axis",u="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+c,m=t.options.font||"flot-tick-label tickLabel";if(s.removeText(u),t.show&&0!=t.ticks.length)for(var p=0;p<t.ticks.length;++p)!(a=t.ticks[p]).label||a.v<t.min||a.v>t.max||("x"==t.direction?(o="center",n=f.left+t.p2c(a.v),"bottom"==t.position?r=l.top+l.padding+l.eventSectionPadding:(r=l.top+l.height-l.padding,i="bottom")):(i="middle",r=f.top+t.p2c(a.v),"left"==t.position?(n=l.left+l.width-l.padding,o="right"):n=l.left+l.padding),s.addText(u,n,r,a.label,m,null,null,o,i))})),function(){null!=l.legend.container?e(l.legend.container).html(""):t.find(".legend").remove();if(!l.legend.show)return;for(var a,n,r=[],o=[],s=!1,c=l.legend.labelFormatter,u=0;u<i.length;++u)(a=i[u]).label&&(n=c?c(a.label,a):a.label)&&o.push({label:n,color:a.color});if(l.legend.sorted)if(e.isFunction(l.legend.sorted))o.sort(l.legend.sorted);else if("reverse"==l.legend.sorted)o.reverse();else{var m="descending"!=l.legend.sorted;o.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=m?1:-1}))}for(u=0;u<o.length;++u){var p=o[u];u%l.legend.noColumns==0&&(s&&r.push("</tr>"),r.push("<tr>"),s=!0),r.push('<td class="legendColorBox"><div style="border:1px solid '+l.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+p.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+p.label+"</td>")}s&&r.push("</tr>");if(0==r.length)return;var d='<table style="font-size:smaller;color:'+l.grid.color+'">'+r.join("")+"</table>";if(null!=l.legend.container)e(l.legend.container).html(d);else{var h="",g=l.legend.position,b=l.legend.margin;null==b[0]&&(b=[b,b]),"n"==g.charAt(0)?h+="top:"+(b[1]+f.top)+"px;":"s"==g.charAt(0)&&(h+="bottom:"+(b[1]+f.bottom)+"px;"),"e"==g.charAt(1)?h+="right:"+(b[0]+f.right)+"px;":"w"==g.charAt(1)&&(h+="left:"+(b[0]+f.left)+"px;");var v=e('<div class="legend">'+d.replace('style="','style="position:absolute;'+h+";")+"</div>").appendTo(t);if(0!=l.legend.backgroundOpacity){var x=l.legend.backgroundColor;null==x&&((x=(x=l.grid.backgroundColor)&&"string"==typeof x?e.color.parse(x):e.color.extract(v,"background-color")).a=1,x=x.toString());var E=v.children();e('<div style="position:absolute;width:'+E.width()+"px;height:"+E.height()+"px;"+h+"background-color:"+x+';"> </div>').prependTo(v).css("opacity",l.legend.backgroundOpacity)}}}()}function N(t){var a,n=t.options;a="number"==typeof n.ticks&&n.ticks>0?n.ticks:.3*Math.sqrt("x"==t.direction?s.width:s.height);var r=(t.max-t.min)/a,o=-Math.floor(Math.log(r)/Math.LN10),i=n.tickDecimals;null!=i&&o>i&&(o=i);var l,c=Math.pow(10,-o),u=r/c;if(u<1.5?l=1:u<3?(l=2,u>2.25&&(null==i||o+1<=i)&&(l=2.5,++o)):l=u<7.5?5:10,l*=c,null!=n.minTickSize&&l<n.minTickSize&&(l=n.minTickSize),t.delta=r,t.tickDecimals=Math.max(0,null!=i?i:o),t.tickSize=n.tickSize||l,null!==n.tickDecimals&&void 0!==n.tickDecimals||(t.scaledDecimals=t.tickDecimals+o),"time"==n.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,a,n,r=[],o=(a=e.min,(n=e.tickSize)*Math.floor(a/n)),i=0,l=Number.NaN;do{t=l,l=o+i*e.tickSize,r.push(l),++i}while(l<e.max&&l!=t);return r},t.tickFormatter=function(e,t){var a=t.tickDecimals?Math.pow(10,t.tickDecimals):1,n=""+Math.round(e*a)/a;if(null!=t.tickDecimals){var r=n.indexOf("."),o=-1==r?0:n.length-r-1;if(o<t.tickDecimals)return(o?n:n+".")+(""+a).substr(1,t.tickDecimals-o)}return n}),e.isFunction(n.tickFormatter)&&(t.tickFormatter=function(e,t){return""+n.tickFormatter(e,t)}),null!=n.alignTicksWithAxis){var m=("x"==t.direction?d:h)[n.alignTicksWithAxis-1];if(m&&m.used&&m!=t){var p=t.tickGenerator(t);if(p.length>0&&(null==n.min&&(t.min=Math.min(t.min,p[0])),null==n.max&&p.length>1&&(t.max=Math.max(t.max,p[p.length-1]))),t.tickGenerator=function(e){var t,a,n=[];for(a=0;a<m.ticks.length;++a)t=(m.ticks[a].v-m.min)/(m.max-m.min),t=e.min+t*(e.max-e.min),n.push(t);return n},!t.mode&&null==n.tickDecimals){var f=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),g=t.tickGenerator(t);g.length>1&&/\..*0$/.test((g[1]-g[0]).toFixed(f))||(t.tickDecimals=f)}}}}function L(t){var a,n,r=t.options.ticks,o=[];for(null==r||"number"==typeof r&&r>0?o=t.tickGenerator(t):r&&(o=e.isFunction(r)?r(t):r),t.ticks=[],a=0;a<o.length;++a){var i=null,l=o[a];"object"==typeof l?(n=+l[0],l.length>1&&(i=l[1])):n=+l,null==i&&(i=t.tickFormatter(n,t)),isNaN(n)||t.ticks.push({v:n,label:i})}}function I(e,t){var a=!1;return e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v),a=!0),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v),a=!0)),a}function _(){s.clear(),E(v.drawBackground,[m]);var e=l.grid;e.show&&e.backgroundColor&&(m.save(),m.translate(f.left,f.top),m.fillStyle=Z(l.grid.backgroundColor,b,0,"rgba(255, 255, 255, 0)"),m.fillRect(0,0,g,b),m.restore()),e.show&&!e.aboveData&&D();for(var t=0;t<i.length;++t)E(v.drawSeries,[m,i[t]]),R(i[t]);E(v.draw,[m]),e.show&&e.aboveData&&D(),s.render(),Y()}function z(e,t){for(var a,n,r,o,i=w(),l=0;l<i.length;++l)if((a=i[l]).direction==t&&(e[o=t+a.n+"axis"]||1!=a.n||(o=t+"axis"),e[o])){n=e[o].from,r=e[o].to;break}if(e[o]||(a="x"==t?d[0]:h[0],n=e[t+"1"],r=e[t+"2"]),null!=n&&null!=r&&n>r){var s=n;n=r,r=s}return{from:n,to:r,axis:a}}function D(){var t,a,n,r;m.save(),m.translate(f.left,f.top);var o=l.grid.markings;if(o)for(e.isFunction(o)&&((a=x.getAxes()).xmin=a.xaxis.min,a.xmax=a.xaxis.max,a.ymin=a.yaxis.min,a.ymax=a.yaxis.max,o=o(a)),t=0;t<o.length;++t){var i=o[t],s=z(i,"x"),c=z(i,"y");if(null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),!(s.to<s.axis.min||s.from>s.axis.max||c.to<c.axis.min||c.from>c.axis.max)){s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max);var u=s.from===s.to,p=c.from===c.to;if(!u||!p)if(s.from=Math.floor(s.axis.p2c(s.from)),s.to=Math.floor(s.axis.p2c(s.to)),c.from=Math.floor(c.axis.p2c(c.from)),c.to=Math.floor(c.axis.p2c(c.to)),u||p){var d=i.lineWidth||l.grid.markingsLineWidth,h=d%2?.5:0;m.beginPath(),m.strokeStyle=i.color||l.grid.markingsColor,m.lineWidth=d,u?(m.moveTo(s.to+h,c.from),m.lineTo(s.to+h,c.to)):(m.moveTo(s.from,c.to+h),m.lineTo(s.to,c.to+h)),m.stroke()}else m.fillStyle=i.color||l.grid.markingsColor,m.fillRect(s.from,c.to,s.to-s.from,c.from-c.to)}}a=w(),n=l.grid.borderWidth;for(var v=0;v<a.length;++v){var E,y,k,S,O=a[v],C=O.box,j=O.tickLength;if(O.show&&0!=O.ticks.length){for(m.lineWidth=1,"x"==O.direction?(E=0,y="full"==j?"top"==O.position?0:b:C.top-f.top+("top"==O.position?C.height:0)):(y=0,E="full"==j?"left"==O.position?0:g:C.left-f.left+("left"==O.position?C.width:0)),O.innermost||(m.strokeStyle=O.options.color,m.beginPath(),k=S=0,"x"==O.direction?k=g+1:S=b+1,1==m.lineWidth&&("x"==O.direction?y=Math.floor(y)+.5:E=Math.floor(E)+.5),m.moveTo(E,y),m.lineTo(E+k,y+S),m.stroke()),m.strokeStyle=O.options.tickColor,m.beginPath(),t=0;t<O.ticks.length;++t){var T=O.ticks[t].v;k=S=0,isNaN(T)||T<O.min||T>O.max||"full"==j&&("object"==typeof n&&n[O.position]>0||n>0)&&(T==O.min||T==O.max)||("x"==O.direction?(E=O.p2c(T),S="full"==j?-b:j,"top"==O.position&&(S=-S)):(y=O.p2c(T),k="full"==j?-g:j,"left"==O.position&&(k=-k)),1==m.lineWidth&&("x"==O.direction?E=Math.floor(E)+.5:y=Math.floor(y)+.5),m.moveTo(E,y),m.lineTo(E+k,y+S))}m.stroke()}}n&&(r=l.grid.borderColor,"object"==typeof n||"object"==typeof r?("object"!==typeof n&&(n={top:n,right:n,bottom:n,left:n}),"object"!==typeof r&&(r={top:r,right:r,bottom:r,left:r}),n.top>0&&(m.strokeStyle=r.top,m.lineWidth=n.top,m.beginPath(),m.moveTo(0-n.left,0-n.top/2),m.lineTo(g,0-n.top/2),m.stroke()),n.right>0&&(m.strokeStyle=r.right,m.lineWidth=n.right,m.beginPath(),m.moveTo(g+n.right/2,0-n.top),m.lineTo(g+n.right/2,b),m.stroke()),n.bottom>0&&(m.strokeStyle=r.bottom,m.lineWidth=n.bottom,m.beginPath(),m.moveTo(g+n.right,b+n.bottom/2),m.lineTo(0,b+n.bottom/2),m.stroke()),n.left>0&&(m.strokeStyle=r.left,m.lineWidth=n.left,m.beginPath(),m.moveTo(0-n.left/2,b+n.bottom),m.lineTo(0-n.left/2,0),m.stroke())):(m.lineWidth=n,m.strokeStyle=l.grid.borderColor,m.strokeRect(-n/2,-n/2,g+n,b+n))),m.restore()}function R(e){e.lines.show&&(function(e){function t(e,t,a,n,r){var o=e.points,i=e.pointsize,l=null,s=null;m.beginPath();for(var c=i;c<o.length;c+=i){var u=o[c-i],p=o[c-i+1],d=o[c],h=o[c+1];if(null!=u&&null!=d){if(p<=h&&p<r.min){if(h<r.min)continue;u=(r.min-p)/(h-p)*(d-u)+u,p=r.min}else if(h<=p&&h<r.min){if(p<r.min)continue;d=(r.min-p)/(h-p)*(d-u)+u,h=r.min}if(p>=h&&p>r.max){if(h>r.max)continue;u=(r.max-p)/(h-p)*(d-u)+u,p=r.max}else if(h>=p&&h>r.max){if(p>r.max)continue;d=(r.max-p)/(h-p)*(d-u)+u,h=r.max}if(u<=d&&u<n.min){if(d<n.min)continue;p=(n.min-u)/(d-u)*(h-p)+p,u=n.min}else if(d<=u&&d<n.min){if(u<n.min)continue;h=(n.min-u)/(d-u)*(h-p)+p,d=n.min}if(u>=d&&u>n.max){if(d>n.max)continue;p=(n.max-u)/(d-u)*(h-p)+p,u=n.max}else if(d>=u&&d>n.max){if(u>n.max)continue;h=(n.max-u)/(d-u)*(h-p)+p,d=n.max}u==l&&p==s||m.moveTo(n.p2c(u)+t,r.p2c(p)+a),l=d,s=h,m.lineTo(n.p2c(d)+t,r.p2c(h)+a)}}m.stroke()}m.save(),m.translate(f.left,f.top),m.lineJoin="round";var a=e.lines.lineWidth,n=e.shadowSize;if(a>0&&n>0){m.lineWidth=n,m.strokeStyle="rgba(0,0,0,0.1)";var r=Math.PI/18;t(e.datapoints,Math.sin(r)*(a/2+n/2),Math.cos(r)*(a/2+n/2),e.xaxis,e.yaxis),m.lineWidth=n/2,t(e.datapoints,Math.sin(r)*(a/2+n/4),Math.cos(r)*(a/2+n/4),e.xaxis,e.yaxis)}m.lineWidth=a,m.strokeStyle=e.color;var o=A(e.lines,e.color,0,b);o&&(m.fillStyle=o,function(e,t,a){for(var n=e.points,r=e.pointsize,o=Math.min(Math.max(0,a.min),a.max),i=0,l=!1,s=1,c=0,u=0;!(r>0&&i>n.length+r);){var p=n[(i+=r)-r],d=n[i-r+s],h=n[i],f=n[i+s];if(l){if(r>0&&null!=p&&null==h){u=i,r=-r,s=2;continue}if(r<0&&i==c+r){m.fill(),l=!1,s=1,i=c=u+(r=-r);continue}}if(null!=p&&null!=h){if(p<=h&&p<t.min){if(h<t.min)continue;d=(t.min-p)/(h-p)*(f-d)+d,p=t.min}else if(h<=p&&h<t.min){if(p<t.min)continue;f=(t.min-p)/(h-p)*(f-d)+d,h=t.min}if(p>=h&&p>t.max){if(h>t.max)continue;d=(t.max-p)/(h-p)*(f-d)+d,p=t.max}else if(h>=p&&h>t.max){if(p>t.max)continue;f=(t.max-p)/(h-p)*(f-d)+d,h=t.max}if(l||(m.beginPath(),m.moveTo(t.p2c(p),a.p2c(o)),l=!0),d>=a.max&&f>=a.max)m.lineTo(t.p2c(p),a.p2c(a.max)),m.lineTo(t.p2c(h),a.p2c(a.max));else if(d<=a.min&&f<=a.min)m.lineTo(t.p2c(p),a.p2c(a.min)),m.lineTo(t.p2c(h),a.p2c(a.min));else{var g=p,b=h;d<=f&&d<a.min&&f>=a.min?(p=(a.min-d)/(f-d)*(h-p)+p,d=a.min):f<=d&&f<a.min&&d>=a.min&&(h=(a.min-d)/(f-d)*(h-p)+p,f=a.min),d>=f&&d>a.max&&f<=a.max?(p=(a.max-d)/(f-d)*(h-p)+p,d=a.max):f>=d&&f>a.max&&d<=a.max&&(h=(a.max-d)/(f-d)*(h-p)+p,f=a.max),p!=g&&m.lineTo(t.p2c(g),a.p2c(d)),m.lineTo(t.p2c(p),a.p2c(d)),m.lineTo(t.p2c(h),a.p2c(f)),h!=b&&(m.lineTo(t.p2c(h),a.p2c(f)),m.lineTo(t.p2c(b),a.p2c(f)))}}}}(e.datapoints,e.xaxis,e.yaxis));a>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);m.restore()}(e),e.points.show||e.bars.show||function(e){for(var t=[],a=null,n=null,r=e.datapoints,o=[],i=0;i<r.pointsize-2;i++)o.push(0);for(var l=0;l<r.points.length;l+=r.pointsize){var s=r.points[l],c=r.points[l+1];n=l===r.points.length-r.pointsize?null:r.points[l+r.pointsize],null!==s&&null!==c&&null===a&&null===n&&(t.push(s),t.push(c),t.push.apply(t,o)),a=s}var u=r.points;r.points=t,e.points.radius=e.lines.lineWidth/2,F(e),r.points=u}(e)),e.bars.show&&function(e){var t;switch(m.save(),m.translate(f.left,f.top),m.lineWidth=e.bars.lineWidth,m.strokeStyle=e.color,e.bars.align){case"left":t=0;break;case"right":t=-e.bars.barWidth;break;default:t=-e.bars.barWidth/2}var a=e.bars.fill?function(t,a){return A(e.bars,e.color,t,a)}:null;(function(t,a,n,r,o,i){for(var l=t.points,s=t.pointsize,c=0;c<l.length;c+=s)null!=l[c]&&P(l[c],l[c+1],l[c+2],a,n,r,o,i,m,e.bars.horizontal,e.bars.lineWidth)})(e.datapoints,t,t+e.bars.barWidth,a,e.xaxis,e.yaxis),m.restore()}(e),e.points.show&&F(e)}function F(e){function t(e,t,a,n,r,o,i,l){for(var s=e.points,c=e.pointsize,u=0;u<s.length;u+=c){var p=s[u],d=s[u+1];null==p||p<o.min||p>o.max||d<i.min||d>i.max||(m.beginPath(),p=o.p2c(p),d=i.p2c(d)+n,"circle"==l?m.arc(p,d,t,0,r?Math.PI:2*Math.PI,!1):l(m,p,d,t,r),m.closePath(),a&&(m.fillStyle=a,m.fill()),m.stroke())}}m.save(),m.translate(f.left,f.top);var a=e.points.lineWidth,n=e.shadowSize,r=e.points.radius,o=e.points.symbol;if(0==a&&(a=1e-4),a>0&&n>0){var i=n/2;m.lineWidth=i,m.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,r,null,i+i/2,!0,e.xaxis,e.yaxis,o),m.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,r,null,i/2,!0,e.xaxis,e.yaxis,o)}m.lineWidth=a,m.strokeStyle=e.color,t(e.datapoints,r,A(e.points,e.color),0,!1,e.xaxis,e.yaxis,o),m.restore()}function P(e,t,a,n,r,o,i,l,s,c,u){var m,p,d,h,f,g,b,v,x;c?(v=g=b=!0,f=!1,h=t+n,d=t+r,(p=e)<(m=a)&&(x=p,p=m,m=x,f=!0,g=!1)):(f=g=b=!0,v=!1,m=e+n,p=e+r,(h=t)<(d=a)&&(x=h,h=d,d=x,v=!0,b=!1)),p<i.min||m>i.max||h<l.min||d>l.max||(m<i.min&&(m=i.min,f=!1),p>i.max&&(p=i.max,g=!1),d<l.min&&(d=l.min,v=!1),h>l.max&&(h=l.max,b=!1),m=i.p2c(m),d=l.p2c(d),p=i.p2c(p),h=l.p2c(h),o&&(s.fillStyle=o(d,h),s.fillRect(m,h,p-m,d-h)),u>0&&(f||g||b||v)&&(s.beginPath(),s.moveTo(m,d),f?s.lineTo(m,h):s.moveTo(m,h),b?s.lineTo(p,h):s.moveTo(p,h),g?s.lineTo(p,d):s.moveTo(p,d),v?s.lineTo(m,d):s.moveTo(m,d),s.stroke()))}function A(t,a,n,r){var o=t.fill;if(!o)return null;if(t.fillColor)return Z(t.fillColor,n,r,a);var i=e.color.parse(a);return i.a="number"==typeof o?o:.4,i.normalize(),i.toString()}x.setData=y,x.setupGrid=M,x.draw=_,x.getPlaceholder=function(){return t},x.getCanvas=function(){return s.element},x.getPlotOffset=function(){return f},x.width=function(){return g},x.height=function(){return b},x.offset=function(){var e=u.offset();return e.left+=f.left,e.top+=f.top,e},x.getData=function(){return i},x.getAxes=function(){var t={};return e.each(d.concat(h),(function(e,a){a&&(t[a.direction+(1!=a.n?a.n:"")+"axis"]=a)})),t},x.getXAxes=function(){return d},x.getYAxes=function(){return h},x.c2p=S,x.p2c=function(e){var t,a,n,r={};for(t=0;t<d.length;++t)if((a=d[t])&&a.used&&(n="x"+a.n,null==e[n]&&1==a.n&&(n="x"),null!=e[n])){r.left=a.p2c(e[n]);break}for(t=0;t<h.length;++t)if((a=h[t])&&a.used&&(n="y"+a.n,null==e[n]&&1==a.n&&(n="y"),null!=e[n])){r.top=a.p2c(e[n]);break}return r},x.getOptions=function(){return l},x.highlight=G,x.unhighlight=$,x.triggerRedrawOverlay=Y,x.pointOffset=function(e){return{left:parseInt(d[k(e,"x")-1].p2c(+e.x)+f.left,10),top:parseInt(h[k(e,"y")-1].p2c(+e.y)+f.top,10)}},x.shutdown=C,x.destroy=function(){C(),t.removeData("plot").empty(),i=[],l=null,s=null,c=null,u=null,m=null,p=null,d=[],h=[],v=null,W=[],x=null},x.resize=function(){var e=t.width(),a=t.height();s.resize(e,a),c.resize(e,a)},x.hooks=v,function(){for(var t={Canvas:a},n=0;n<o.length;++n){var r=o[n];r.init(x,t),r.options&&e.extend(!0,l,r.options)}}(),function(a){e.extend(!0,l,a),a&&a.colors&&(l.colors=a.colors);null==l.xaxis.color&&(l.xaxis.color=e.color.parse(l.grid.color).scale("a",.22).toString());null==l.yaxis.color&&(l.yaxis.color=e.color.parse(l.grid.color).scale("a",.22).toString());null==l.xaxis.tickColor&&(l.xaxis.tickColor=l.grid.tickColor||l.xaxis.color);null==l.yaxis.tickColor&&(l.yaxis.tickColor=l.grid.tickColor||l.yaxis.color);null==l.grid.borderColor&&(l.grid.borderColor=l.grid.color);null==l.grid.tickColor&&(l.grid.tickColor=e.color.parse(l.grid.color).scale("a",.22).toString());var n,r,o,i=t.css("font-size"),s=i?+i.replace("px",""):13,c={style:t.css("font-style"),size:Math.round(.8*s),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(o=l.xaxes.length||1,n=0;n<o;++n)(r=l.xaxes[n])&&!r.tickColor&&(r.tickColor=r.color),r=e.extend(!0,{},l.xaxis,r),l.xaxes[n]=r,r.font&&(r.font=e.extend({},c,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(o=l.yaxes.length||1,n=0;n<o;++n)(r=l.yaxes[n])&&!r.tickColor&&(r.tickColor=r.color),r=e.extend(!0,{},l.yaxis,r),l.yaxes[n]=r,r.font&&(r.font=e.extend({},c,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));l.xaxis.noTicks&&null==l.xaxis.ticks&&(l.xaxis.ticks=l.xaxis.noTicks);l.yaxis.noTicks&&null==l.yaxis.ticks&&(l.yaxis.ticks=l.yaxis.noTicks);l.x2axis&&(l.xaxes[1]=e.extend(!0,{},l.xaxis,l.x2axis),l.xaxes[1].position="top",null==l.x2axis.min&&(l.xaxes[1].min=null),null==l.x2axis.max&&(l.xaxes[1].max=null));l.y2axis&&(l.yaxes[1]=e.extend(!0,{},l.yaxis,l.y2axis),l.yaxes[1].position="right",null==l.y2axis.min&&(l.yaxes[1].min=null),null==l.y2axis.max&&(l.yaxes[1].max=null));l.grid.coloredAreas&&(l.grid.markings=l.grid.coloredAreas);l.grid.coloredAreasColor&&(l.grid.markingsColor=l.grid.coloredAreasColor);l.lines&&e.extend(!0,l.series.lines,l.lines);l.points&&e.extend(!0,l.series.points,l.points);l.bars&&e.extend(!0,l.series.bars,l.bars);null!=l.shadowSize&&(l.series.shadowSize=l.shadowSize);null!=l.highlightColor&&(l.series.highlightColor=l.highlightColor);for(n=0;n<l.xaxes.length;++n)O(d,n+1).options=l.xaxes[n];for(n=0;n<l.yaxes.length;++n)O(h,n+1).options=l.yaxes[n];for(var u in v)l.hooks[u]&&l.hooks[u].length&&(v[u]=v[u].concat(l.hooks[u]));E(v.processOptions,[l])}(r),function(){t.find(".flot-temp-elem").remove(),"static"==t.css("position")&&t.css("position","relative");s=new a("flot-base",t),c=new a("flot-overlay",t),m=s.context,p=c.context,u=e(c.element).unbind();var n=t.data("plot");n&&(n.shutdown(),c.clear());t.data("plot",x)}(),y(n),M(),_(),function(){l.grid.hoverable&&(u.mousemove(q),u.bind("mouseleave",U));l.grid.clickable&&u.click(B);E(v.bindEvents,[u])}();var W=[],H=null;function q(e){l.grid.hoverable&&V("plothover",e,(function(e){return 0!=e.hoverable}))}function U(e){l.grid.hoverable&&V("plothover",e,(function(){return!1}))}function B(e){x.isSelecting||V("plotclick",e,(function(e){return 0!=e.clickable}))}function V(e,a,n){var r=u.offset(),o=a.pageX-r.left-f.left,s=a.pageY-r.top-f.top,c=S({left:o,top:s});c.pageX=a.pageX,c.pageY=a.pageY,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey;var m=function(e,t,a){var n,r,o,s=l.grid.mouseActiveRadius,c=s*s+1,u=null;for(n=i.length-1;n>=0;--n)if(a(i[n])){var m=i[n],p=m.xaxis,d=m.yaxis,h=m.datapoints.points,f=p.c2p(e),g=d.c2p(t),b=s/p.scale,v=s/d.scale;if(o=m.datapoints.pointsize,p.options.inverseTransform&&(b=Number.MAX_VALUE),d.options.inverseTransform&&(v=Number.MAX_VALUE),m.lines.show||m.points.show)for(r=0;r<h.length;r+=o){var x=h[r],E=h[r+1];if(null!=x&&!(x-f>b||x-f<-b||E-g>v||E-g<-v)){var y=Math.abs(p.p2c(x)-e),k=Math.abs(d.p2c(E)-t),w=y*y+k*k;w<c&&(c=w,u=[n,r/o])}}if(m.bars.show&&!u){var S,O;switch(m.bars.align){case"left":S=0;break;case"right":S=-m.bars.barWidth;break;default:S=-m.bars.barWidth/2}for(O=S+m.bars.barWidth,r=0;r<h.length;r+=o){x=h[r],E=h[r+1];var C=h[r+2];null!=x&&((i[n].bars.horizontal?f<=Math.max(C,x)&&f>=Math.min(C,x)&&g>=E+S&&g<=E+O:f>=x+S&&f<=x+O&&g>=Math.min(C,E)&&g<=Math.max(C,E))&&(u=[n,r/o]))}}}return u?(n=u[0],r=u[1],o=i[n].datapoints.pointsize,{datapoint:i[n].datapoints.points.slice(r*o,(r+1)*o),dataIndex:r,series:i[n],seriesIndex:n}):null}(o,s,n);if(m&&(m.pageX=parseInt(m.series.xaxis.p2c(m.datapoint[0])+r.left+f.left,10),m.pageY=parseInt(m.series.yaxis.p2c(m.datapoint[1])+r.top+f.top,10)),l.grid.autoHighlight){for(var p=0;p<W.length;++p){var d=W[p];d.auto!=e||m&&d.series==m.series&&d.point[0]==m.datapoint[0]&&d.point[1]==m.datapoint[1]||$(d.series,d.point)}m&&G(m.series,m.datapoint,e)}t.trigger(e,[c,m])}function Y(){var e=l.interaction.redrawOverlayInterval;-1!=e?H||(H=setTimeout(Q,e)):Q()}function Q(){var e,t;for(H=null,p.save(),c.clear(),p.translate(f.left,f.top),e=0;e<W.length;++e)(t=W[e]).series.bars.show?X(t.series,t.point):J(t.series,t.point);p.restore(),E(v.drawOverlay,[p])}function G(e,t,a){if("number"==typeof e&&(e=i[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var r=K(e,t);-1==r?(W.push({series:e,point:t,auto:a}),Y()):a||(W[r].auto=!1)}function $(e,t){if(null==e&&null==t)return W=[],void Y();if("number"==typeof e&&(e=i[e]),"number"==typeof t){var a=e.datapoints.pointsize;t=e.datapoints.points.slice(a*t,a*(t+1))}var n=K(e,t);-1!=n&&(W.splice(n,1),Y())}function K(e,t){for(var a=0;a<W.length;++a){var n=W[a];if(n.series==e&&n.point[0]==t[0]&&n.point[1]==t[1])return a}return-1}function J(t,a){var n=a[0],r=a[1],o=t.xaxis,i=t.yaxis,l="string"===typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(n<o.min||n>o.max||r<i.min||r>i.max)){var s=t.points.radius+t.points.lineWidth/2;p.lineWidth=s,p.strokeStyle=l;var c=1.5*s;n=o.p2c(n),r=i.p2c(r),p.beginPath(),"circle"==t.points.symbol?p.arc(n,r,c,0,2*Math.PI,!1):t.points.symbol(p,n,r,c,!1),p.closePath(),p.stroke()}}function X(t,a){var n,r="string"===typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),o=r;switch(t.bars.align){case"left":n=0;break;case"right":n=-t.bars.barWidth;break;default:n=-t.bars.barWidth/2}p.lineWidth=t.bars.lineWidth,p.strokeStyle=r,P(a[0],a[1],a[2]||0,n,n+t.bars.barWidth,(function(){return o}),t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function Z(t,a,n,r){if("string"==typeof t)return t;for(var o=m.createLinearGradient(0,n,0,a),i=0,l=t.colors.length;i<l;++i){var s=t.colors[i];if("string"!=typeof s){var c=e.color.parse(r);null!=s.brightness&&(c=c.scale("rgb",s.brightness)),null!=s.opacity&&(c.a*=s.opacity),s=c.toString()}o.addColorStop(i/(l-1),s)}return o}}e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),a.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var a=this.element,n=this.context,r=this.pixelRatio;this.width!=e&&(a.width=e*r,a.style.width=e+"px",this.width=e),this.height!=t&&(a.height=t*r,a.style.height=t+"px",this.height=t),n.restore(),n.save(),n.scale(r,r)},a.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},a.prototype.render=function(){var e=this._textCache;for(var a in e)if(t.call(e,a)){var n=this.getTextLayer(a),r=e[a];for(var o in n.hide(),r)if(t.call(r,o)){var i=r[o];for(var l in i)if(t.call(i,l)){for(var s,c=i[l].positions,u=0;s=c[u];u++)s.active?s.rendered||(n.append(s.element),s.rendered=!0):(c.splice(u--,1),s.rendered&&s.element.detach());0==c.length&&delete i[l]}}n.show()}},a.prototype.getTextLayer=function(t){var a=this.text[t];return null==a&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),a=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),a},a.prototype.getTextInfo=function(t,a,n,r,o){var i,l,s,c;if(a=""+a,i="object"===typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px/"+n.lineHeight+"px "+n.family:n,null==(l=this._textCache[t])&&(l=this._textCache[t]={}),null==(s=l[i])&&(s=l[i]={}),null==(c=s[a])){var u=e("<div></div>").html(a).css({position:"absolute","max-width":o,top:-9999}).appendTo(this.getTextLayer(t));"object"===typeof n?u.css({font:i,color:n.color}):"string"===typeof n&&u.addClass(n),c=s[a]={element:u,positions:[]};var m=this._textSizeCache[a];m?(c.width=m.width,c.height=m.height):(c.width=u.outerWidth(!0),c.height=u.outerHeight(!0),this._textSizeCache[a]={width:c.width,height:c.height}),u.detach()}return c},a.prototype.addText=function(e,t,a,n,r,o,i,l,s){var c=this.getTextInfo(e,n,r,o,i),u=c.positions;"center"==l?t-=c.width/2:"right"==l&&(t-=c.width),"middle"==s?a-=c.height/2:"bottom"==s&&(a-=c.height);for(var m,p=0;m=u[p];p++)if(m.x==t&&m.y==a)return void(m.active=!0);m={active:!0,rendered:!1,element:u.length?c.element.clone():c.element,x:t,y:a},u.push(m),m.element.css({top:Math.round(a),left:Math.round(t),"text-align":l})},a.prototype.removeText=function(e,a,n,r,o,i){if(null==r){var l=this._textCache[e];if(null!=l)for(var s in l)if(t.call(l,s)){var c=l[s];for(var u in c)if(t.call(c,u))for(var m=c[u].positions,p=0;d=m[p];p++)d.active=!1}}else{var d;for(m=this.getTextInfo(e,r,o,i).positions,p=0;d=m[p];p++)d.x==a&&d.y==n&&(d.active=!1)}},e.plot=function(t,a,r){return new n(e(t),a,r,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,a){return this.each((function(){e.plot(this,t,a)}))}}(window.jQuery)},272:function(e,t){window.jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,a){if(null!=t.stack&&!1!==t.stack){var n=function(e,t){for(var a=null,n=0;n<t.length&&e!=t[n];++n)t[n].stack==e.stack&&(a=t[n]);return a}(t,e.getData());if(n){for(var r,o,i,l,s,c,u,m,p=a.pointsize,d=a.points,h=n.datapoints.pointsize,f=n.datapoints.points,g=[],b=t.lines.show,v=t.bars.horizontal,x=p>2&&(v?a.format[2].x:a.format[2].y),E=b&&t.lines.steps,y=v?1:0,k=v?0:1,w=0,S=0;!(w>=d.length&&S>=f.length);){if(u=g.length,w<d.length&&null==d[w]){for(m=0;m<p;++m)g.push(f[w+m]);x&&(g[u+2]=f[w+k]),w+=p}else if(w>=d.length)S+=h;else if(S>=f.length){for(m=0;m<p;++m)g.push(d[w+m]);w+=p}else if(S<f.length&&null==f[S])S+=h;else{if(r=d[w+y],o=d[w+k],l=f[S+y],s=f[S+k],c=0,r==l){for(m=0;m<p;++m)g.push(d[w+m]);g[u+k]+=s,c=s,w+=p,S+=h}else if(r>l){if(0==w){for(m=0;m<p;++m)g.push(f[S+m]);c=s}if(w>0&&null!=d[w-p]){for(i=o+(d[w-p+k]-o)*(l-r)/(d[w-p+y]-r),g.push(l),g.push(i+s),m=2;m<p;++m)g.push(d[w+m]);c=s}S+=h}else{for(m=0;m<p;++m)g.push(d[w+m]);S>0&&null!=f[S-h]&&(c=s+(f[S-h+k]-s)*(r-l)/(f[S-h+y]-l)),g[u+k]+=c,w+=p}u!=g.length&&x&&(g[u+2]=c)}if(E&&u!=g.length&&u>0&&null!=g[u]&&g[u]!=g[u-p]&&g[u+1]!=g[u-p+1]){for(m=0;m<p;++m)g[u+p+m]=g[u+m];g[u+1]=g[u-p+1]}}a.points=g}}}))},options:{series:{stack:null}},name:"stack",version:"1.2"})},273:function(e,t){!function(e){function t(e,t){return t*Math.floor(e/t)}function a(e,t,a,n){if("function"==typeof e.strftime)return e.strftime(t);var r,o=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},i=[],l=!1,s=e.getHours(),c=s<12;null==a&&(a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==n&&(n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),r=s>12?s-12:0==s?12:s;for(var u=0;u<t.length;++u){var m=t.charAt(u);if(l){switch(m){case"a":m=""+n[e.getDay()];break;case"b":m=""+a[e.getMonth()];break;case"d":m=o(e.getDate(),"");break;case"e":m=o(e.getDate()," ");break;case"h":case"H":m=o(s);break;case"I":m=o(r);break;case"l":m=o(r," ");break;case"m":m=o(e.getMonth()+1,"");break;case"M":m=o(e.getMinutes());break;case"q":m=""+(Math.floor(e.getMonth()/3)+1);break;case"S":m=o(e.getSeconds());break;case"y":m=o(e.getFullYear()%100);break;case"Y":m=""+e.getFullYear();break;case"p":m=c?"am":"pm";break;case"P":m=c?"AM":"PM";break;case"w":m=""+e.getDay()}i.push(m),l=!1}else"%"==m?l=!0:i.push(m)}return i.join("")}function n(e){function t(e,t,a,n){e[t]=function(){return a[n].apply(a,arguments)}}var a={date:e};void 0!=e.strftime&&t(a,"strftime",e,"strftime"),t(a,"getTime",e,"getTime"),t(a,"setTime",e,"setTime");for(var n=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],r=0;r<n.length;r++)t(a,"get"+n[r],e,"getUTC"+n[r]),t(a,"set"+n[r],e,"setUTC"+n[r]);return a}function r(e,t){return"browser"==t.timezone?new Date(e):(t.timezone&&t.timezone,n(new Date(e)))}var o={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},i=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],l=i.concat([[3,"month"],[6,"month"],[1,"year"]]),s=i.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(n){n.hooks.processOptions.push((function(n){e.each(n.getAxes(),(function(e,n){var i=n.options;"time"==i.mode&&(n.tickGenerator=function(e){var a=[],n=r(e.min,i),c=0,u=i.tickSize&&"quarter"===i.tickSize[1]||i.minTickSize&&"quarter"===i.minTickSize[1]?s:l;null!=i.minTickSize&&(c="number"==typeof i.tickSize?i.tickSize:i.minTickSize[0]*o[i.minTickSize[1]]);for(var m=0;m<u.length-1&&!(e.delta<(u[m][0]*o[u[m][1]]+u[m+1][0]*o[u[m+1][1]])/2&&u[m][0]*o[u[m][1]]>=c);++m);var p=u[m][0],d=u[m][1];if("year"==d){if(null!=i.minTickSize&&"year"==i.minTickSize[1])p=Math.floor(i.minTickSize[0]);else{var h=Math.pow(10,Math.floor(Math.log(e.delta/o.year)/Math.LN10)),f=e.delta/o.year/h;p=f<1.5?1:f<3?2:f<7.5?5:10,p*=h}p<1&&(p=1)}e.tickSize=i.tickSize||[p,d];var g=e.tickSize[0];d=e.tickSize[1];var b=g*o[d];"second"==d?n.setSeconds(t(n.getSeconds(),g)):"minute"==d?n.setMinutes(t(n.getMinutes(),g)):"hour"==d?n.setHours(t(n.getHours(),g)):"month"==d?n.setMonth(t(n.getMonth(),g)):"quarter"==d?n.setMonth(3*t(n.getMonth()/3,g)):"year"==d&&n.setFullYear(t(n.getFullYear(),g)),n.setMilliseconds(0),b>=o.minute&&n.setSeconds(0),b>=o.hour&&n.setMinutes(0),b>=o.day&&n.setHours(0),b>=4*o.day&&n.setDate(1),b>=2*o.month&&n.setMonth(t(n.getMonth(),3)),b>=2*o.quarter&&n.setMonth(t(n.getMonth(),6)),b>=o.year&&n.setMonth(0);var v,x=0,E=Number.NaN;do{if(v=E,E=n.getTime(),a.push(E),"month"==d||"quarter"==d)if(g<1){n.setDate(1);var y=n.getTime();n.setMonth(n.getMonth()+("quarter"==d?3:1));var k=n.getTime();n.setTime(E+x*o.hour+(k-y)*g),x=n.getHours(),n.setHours(0)}else n.setMonth(n.getMonth()+g*("quarter"==d?3:1));else"year"==d?n.setFullYear(n.getFullYear()+g):n.setTime(E+b)}while(E<e.max&&E!=v);return a},n.tickFormatter=function(e,t){var n=r(e,t.options);if(null!=i.timeformat)return a(n,i.timeformat,i.monthNames,i.dayNames);var l=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],s=t.tickSize[0]*o[t.tickSize[1]],c=t.max-t.min,u=i.twelveHourClock?" %p":"",m=i.twelveHourClock?"%I":"%H";return a(n,s<o.minute?m+":%M:%S"+u:s<o.day?c<2*o.day?m+":%M"+u:"%b %d "+m+":%M"+u:s<o.month?"%b %d":l&&s<o.quarter||!l&&s<o.year?c<o.year?"%b":"%b %Y":l&&s<o.year?c<o.year?"Q%q":"Q%q %Y":"%Y",i.monthNames,i.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=a}(window.jQuery)},274:function(e,t){window.jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function a(){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function n(a){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var n=e.offset();t.x=Math.max(0,Math.min(a.pageX-n.left,e.width())),t.y=Math.max(0,Math.min(a.pageY-n.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(a){if(a){var n=e.p2c(a);t.x=Math.max(0,Math.min(n.left,e.width())),t.y=Math.max(0,Math.min(n.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(a){a&&e.setCrosshair(a),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push((function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(a),t.mousemove(n))})),e.hooks.drawOverlay.push((function(e,a){var n=e.getOptions().crosshair;if(n.mode){var r=e.getPlotOffset();if(a.save(),a.translate(r.left,r.top),-1!=t.x){var o=e.getOptions().crosshair.lineWidth%2?.5:0;if(a.strokeStyle=n.color,a.lineWidth=n.lineWidth,a.lineJoin="round",a.beginPath(),-1!=n.mode.indexOf("x")){var i=Math.floor(t.x)+o;a.moveTo(i,0),a.lineTo(i,e.height())}if(-1!=n.mode.indexOf("y")){var l=Math.floor(t.y)+o;a.moveTo(0,l),a.lineTo(e.width(),l)}a.stroke()}a.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mouseout",a),t.unbind("mousemove",n)}))},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})},290:function(e,t,a){},291:function(e,t,a){},292:function(e,t,a){},293:function(e,t,a){e.exports=a.p+"static/media/codicon.22349029.ttf"},294:function(e,t,a){"use strict";a.r(t);var n=a(37),r=a.n(n);window.jQuery=r.a,window.moment=a(53);var o=a(0),i=a.n(o),l=a(39),s=a.n(l),c=a(12),u=a(32),m=a(298),p=a(299),d=a(300),h=a(301),f=a(302),g=a(303),b=a(323),v=a(324),x=a(304),E=a(305),y=i.a.createContext("");function k(){return i.a.useContext(y)}var w=a(296),S=a(297),O=a(157),C=a(27),j=a(22),T=i.a.createContext({theme:"light",userPreference:"auto",setTheme:function(e){}}),M=function(){return i.a.useContext(T)},N=function(){var e=M().theme;return Object(o.useEffect)((function(){document.body.classList.toggle("bootstrap-dark","dark"===e),document.body.classList.toggle("bootstrap","light"===e)}),[e]),null},L=function(){var e=M(),t=e.userPreference,a=e.setTheme;return i.a.createElement(w.a,{className:"ml-auto",inline:!0},i.a.createElement(S.a,{size:"sm"},i.a.createElement(O.a,{color:"secondary",title:"Use light theme",active:"light"===t,onClick:function(){return a("light")}},i.a.createElement(C.a,{icon:j.p,className:"light"===t?"text-white":"text-dark"})),i.a.createElement(O.a,{color:"secondary",title:"Use dark theme",active:"dark"===t,onClick:function(){return a("dark")}},i.a.createElement(C.a,{icon:j.l,className:"dark"===t?"text-white":"text-dark"})),i.a.createElement(O.a,{color:"secondary",title:"Use browser-preferred theme",active:"auto"===t,onClick:function(){return a("auto")}},i.a.createElement(C.a,{icon:j.a,className:"auto"===t?"text-white":"text-dark"}))))},I=function(e){var t=e.consolesLink,a=Object(o.useState)(!1),n=Object(c.a)(a,2),r=n[0],l=n[1],s=k();return i.a.createElement(m.a,{className:"mb-3",dark:!0,color:"dark",expand:"md",fixed:"top"},i.a.createElement(p.a,{onClick:function(){return l(!r)},className:"mr-2"}),i.a.createElement(u.a,{className:"pt-0 navbar-brand",to:"".concat(s,"/graph")},"Prometheus"),i.a.createElement(d.a,{isOpen:r,navbar:!0,style:{justifyContent:"space-between"}},i.a.createElement(h.a,{className:"ml-0",navbar:!0},null!==t&&i.a.createElement(f.a,null,i.a.createElement(g.a,{href:t},"Consoles")),i.a.createElement(f.a,null,i.a.createElement(g.a,{tag:u.a,to:"".concat(s,"/alerts")},"Alerts")),i.a.createElement(f.a,null,i.a.createElement(g.a,{tag:u.a,to:"".concat(s,"/graph")},"Graph")),i.a.createElement(b.a,{nav:!0,inNavbar:!0},i.a.createElement(v.a,{nav:!0,caret:!0},"Status"),i.a.createElement(x.a,null,i.a.createElement(E.a,{tag:u.a,to:"".concat(s,"/status")},"Runtime & Build Information"),i.a.createElement(E.a,{tag:u.a,to:"".concat(s,"/tsdb-status")},"TSDB Status"),i.a.createElement(E.a,{tag:u.a,to:"".concat(s,"/flags")},"Command-Line Flags"),i.a.createElement(E.a,{tag:u.a,to:"".concat(s,"/config")},"Configuration"),i.a.createElement(E.a,{tag:u.a,to:"".concat(s,"/rules")},"Rules"),i.a.createElement(E.a,{tag:u.a,to:"".concat(s,"/targets")},"Targets"),i.a.createElement(E.a,{tag:u.a,to:"".concat(s,"/service-discovery")},"Service Discovery"))),i.a.createElement(f.a,null,i.a.createElement(g.a,{href:"https://prometheus.io/docs/prometheus/latest/getting_started/"},"Help")),i.a.createElement(f.a,null,i.a.createElement(g.a,{href:"".concat(s,"/classic/graph").concat(window.location.search)},"Classic UI")))),i.a.createElement(L,null))},_=a(321),z=a(104),D=a.n(z),R=a(42),F=a.n(R),P=a(23),A=a(69),W=function(e,t){var a=Object(o.useState)({status:"start fetching"}),n=Object(c.a)(a,2),r=n[0],i=n[1],l=Object(o.useState)(),s=Object(c.a)(l,2),u=s[0],m=s[1],p=Object(o.useState)(!0),d=Object(c.a)(p,2),h=d[0],f=d[1];return Object(o.useEffect)((function(){(function(){var a=Object(A.a)(F.a.mark((function a(){var n,r;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return f(!0),a.prev=1,a.next=4,fetch(e,Object(P.a)({cache:"no-store",credentials:"same-origin"},t));case 4:if((n=a.sent).ok){a.next=7;break}throw new Error(n.statusText);case 7:return a.next=9,n.json();case 9:r=a.sent,i(r),f(!1),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),m(a.t0);case 17:case"end":return a.stop()}}),a,null,[[1,14]])})));return function(){return a.apply(this,arguments)}})()()}),[e,t]),{response:r,error:u,isLoading:h}},H=!1,q=a(62),U=a(306),B=["error","isLoading","customErrorMsg","componentTitle"],V=function(e){return function(t){var a=t.error,n=t.isLoading,r=t.customErrorMsg,o=t.componentTitle,l=Object(q.a)(t,B);return a?i.a.createElement(U.a,{color:"danger"},r||i.a.createElement(i.a.Fragment,null,i.a.createElement("strong",null,"Error:")," Error fetching ",o||e.displayName,": ",a.message)):n?i.a.createElement(C.a,{size:"3x",icon:j.o,spin:!0,className:"position-absolute",style:{transform:"translate(-50%, -50%)",top:"50%",left:"50%"}}):i.a.createElement(e,l)}},Y=a(14),Q=a(317),G=a(312),$=a(19),K=a(38),J=a.n(K),X=a(4),Z=a(6),ee=a(17),te=a(16),ae=a(313),ne=a(314),re=a(315),oe=a(316),ie=a(309),le=a(310),se=a(162),ce=a(311),ue=a(173),me=a(160),pe=a.n(me),de=a(161),he=a.n(de),fe=a(325),ge=a(307),be=a(308),ve=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleMetricClick=function(t){e.props.insertAtCursor(t),e.props.updateShow(!1)},e.toggle=function(){e.props.updateShow(!e.props.show)},e}return Object(Z.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(fe.a,{isOpen:this.props.show,toggle:this.toggle,className:"metrics-explorer"},i.a.createElement(ge.a,{toggle:this.toggle},"Metrics Explorer"),i.a.createElement(be.a,null,this.props.metrics.map((function(t){return i.a.createElement("p",{key:t,className:"metric",onClick:e.handleMetricClick.bind(e,t)},t)}))))}}]),a}(o.Component),xe=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).exprInputRef=i.a.createRef(),n.setHeight=function(){var e=n.exprInputRef.current,t=e.offsetHeight,a=e.clientHeight,r=e.scrollHeight,o=t-a;n.setState({height:r+o})},n.handleInput=function(){n.setValue(n.exprInputRef.current.value)},n.setValue=function(e){(0,n.props.onExpressionChange)(e),n.setState({height:"auto"},n.setHeight)},n.handleKeyPress=function(e){var t=n.props.executeQuery;"Enter"!==e.key||e.shiftKey||(t(),e.preventDefault())},n.getSearchMatches=function(e,t){return pe.a.filter(e.replace(/ /g,""),t,{pre:"<strong>",post:"</strong>"})},n.createAutocompleteSection=function(e){var t=e.inputValue,a=void 0===t?"":t,r=e.closeMenu,o=e.highlightedIndex,l={"Query History":n.props.queryHistory,"Metric Names":n.props.metricNames},s=0,u=a.length&&n.props.enableAutocomplete?Object.entries(l).reduce((function(t,r){var l=Object(c.a)(r,2),u=l[0],m=l[1],p=n.getSearchMatches(a,m);return p.length?[].concat(Object($.a)(t),[i.a.createElement("ul",{className:"autosuggest-dropdown-list",key:u},i.a.createElement("li",{className:"autosuggest-dropdown-header"},u),p.slice(0,100).map((function(t){var a=t.original,n=t.string,r=e.getItemProps({key:a,index:s,item:a,style:{backgroundColor:o===s++?"lightgray":"white"}});return i.a.createElement("li",Object.assign({key:u},r,{dangerouslySetInnerHTML:{__html:he()(n,{allowedTags:["strong"]})}}))})))]):t}),[]):[];return u.length?i.a.createElement("div",Object.assign({},e.getMenuProps(),{className:"autosuggest-dropdown"}),u):(setTimeout(r),null)},n.openMetricsExplorer=function(){n.setState({showMetricsExplorer:!0})},n.updateShowMetricsExplorer=function(e){n.setState({showMetricsExplorer:e})},n.insertAtCursor=function(e){if(n.exprInputRef.current){var t,a=n.exprInputRef.current.selectionStart,r=n.exprInputRef.current.selectionEnd,o=n.exprInputRef.current.value;t=a&&r?o.substring(0,a)+e+o.substring(r,o.length):o+e,n.setValue(t)}},n.state={height:"auto",showMetricsExplorer:!1},n}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){this.setHeight()}},{key:"componentDidUpdate",value:function(e){var t=this.props.value;t!==e.value&&this.setValue(t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.executeQuery,n=t.value,r=this.state.height;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ue.a,{onSelect:this.setValue},(function(t){return i.a.createElement("div",null,i.a.createElement(ie.a,{className:"expression-input"},i.a.createElement(le.a,{addonType:"prepend"},i.a.createElement(se.a,null,e.props.loading?i.a.createElement(C.a,{icon:j.o,spin:!0}):i.a.createElement(C.a,{icon:j.n}))),i.a.createElement(ce.a,Object.assign({onInput:e.handleInput,style:{height:r},autoFocus:!0,type:"textarea",rows:"1",onKeyPress:e.handleKeyPress,placeholder:"Expression (press Shift+Enter for newlines)",innerRef:e.exprInputRef},t.getInputProps({onKeyDown:function(a){switch(a.key){case"Home":case"End":a.nativeEvent.preventDownshiftDefault=!0;break;case"ArrowUp":case"ArrowDown":t.isOpen||(a.nativeEvent.preventDownshiftDefault=!0);break;case"Enter":t.closeMenu();break;case"Escape":t.isOpen||e.exprInputRef.current.blur()}}}),{value:n})),i.a.createElement(le.a,{addonType:"append"},i.a.createElement(O.a,{className:"metrics-explorer-btn",title:"Open metrics explorer",onClick:e.openMetricsExplorer},i.a.createElement(C.a,{icon:j.j}))),i.a.createElement(le.a,{addonType:"append"},i.a.createElement(O.a,{className:"execute-btn",color:"primary",onClick:a},"Execute"))),t.isOpen&&e.createAutocompleteSection(t))})),i.a.createElement(ve,{show:this.state.showMetricsExplorer,updateShow:this.updateShowMetricsExplorer,metrics:this.props.metricNames,insertAtCursor:this.insertAtCursor}))}}]),a}(o.Component),Ee=a(9),ye=a(3),ke=a(21),we=a(106),Se=a(109),Oe=a(49),Ce=a(107),je=a(108),Te=a(165),Me=a(81),Ne=a(171),Le=a(40),Ie=a(24),_e=Ee.c.theme({"&":{"&.cm-focused":{outline:"none",outline_fallback:"none"}},".cm-scroller":{overflow:"hidden",fontFamily:'"DejaVu Sans Mono", monospace'},".cm-placeholder":{fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"'},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}}),ze=Ee.c.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),De=Ee.c.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0}),Re=Ie.a.define([{tag:Ie.c.name,color:"#000"},{tag:Ie.c.number,color:"#09885a"},{tag:Ie.c.string,color:"#a31515"},{tag:Ie.c.keyword,color:"#008080"},{tag:Ie.c.function(Ie.c.variableName),color:"#008080"},{tag:Ie.c.labelName,color:"#800000"},{tag:Ie.c.operator},{tag:Ie.c.modifier,color:"#008080"},{tag:Ie.c.paren},{tag:Ie.c.squareBracket},{tag:Ie.c.brace},{tag:Ie.c.invalid,color:"red"},{tag:Ie.c.comment,color:"#888",fontStyle:"italic"}]),Fe=a(164),Pe=new Ne.a,Ae=new ye.e,We=function(){function e(t,a){Object(X.a)(this,e),this.complete=void 0,this.queryHistory=void 0,this.complete=t,this.queryHistory=a}return Object(Z.a)(e,[{key:"promQL",value:function(e){var t=this;return Promise.resolve(this.complete.promQL(e)).then((function(a){var n=e.state,r=e.pos,o=Object(ke.syntaxTree)(n).resolve(r,-1),i=null!=a?a.from:o.from;if(0!==i)return a;var l={from:i,to:r,options:t.queryHistory.map((function(e){return{label:e.length<80?e:e.slice(0,76).concat("..."),detail:"past query",apply:e,info:e.length<80?void 0:e}})),span:/^[a-zA-Z0-9_:]+$/};return null!==a&&(l.options=l.options.concat(a.options)),l}))}}]),e}(),He=function(e){var t=e.value,a=e.onExpressionChange,n=e.queryHistory,r=e.metricNames,l=e.executeQuery,s=e.loading,u=e.enableAutocomplete,m=e.enableHighlighting,p=e.enableLinter,d=Object(o.useRef)(null),h=Object(o.useRef)(null),f=Object(o.useState)(!1),g=Object(c.a)(f,2),b=g[0],v=g[1],x=k(),E=M().theme;Object(o.useEffect)((function(){Pe.activateCompletion(u).activateLinter(p).setComplete({completeStrategy:new We(Object(Fe.newCompleteStrategy)({remote:{url:x,cache:{initialMetricList:r}}}),n)});var e=[m?Re:[],Pe.asExtension(),"dark"===E?De:ze],o=h.current;if(null===o){if(!d.current)throw new Error("expected CodeMirror container element to exist");var i=ye.g.create({doc:t,extensions:[_e,Object(Ee.g)(),Object(we.a)(),ye.g.allowMultipleSelections.of(!0),Object(ke.indentOnInput)(),Object(Oe.a)(),Object(Ce.a)(),Object(Le.autocompletion)(),Object(je.a)(),Ee.c.lineWrapping,Ee.h.of([].concat(Object($.a)(Ce.b),Object($.a)(Se.a),Object($.a)(je.b),Object($.a)(we.b),Object($.a)(Te.a),Object($.a)(Le.completionKeymap),Object($.a)(Me.a))),Object(Ee.j)("Expression (press Shift+Enter for newlines)"),Ae.of(e),Ee.h.of([{key:"Escape",run:function(e){return e.contentDOM.blur(),!1}}]),ye.j.override(Ee.h.of([{key:"Enter",run:function(e){return l(),!0}},{key:"Shift-Enter",run:Se.b}])),Ee.c.updateListener.of((function(e){a(e.state.doc.toString())}))]}),s=new Ee.c({state:i,parent:d.current});h.current=s,s.focus()}else o.dispatch(o.state.update({effects:Ae.reconfigure(e)}))}),[u,m,p,l,a,n,E]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.a,{className:"expression-input"},i.a.createElement(le.a,{addonType:"prepend"},i.a.createElement(se.a,null,s?i.a.createElement(C.a,{icon:j.o,spin:!0}):i.a.createElement(C.a,{icon:j.n}))),i.a.createElement("div",{ref:d,className:"cm-expression-input"}),i.a.createElement(le.a,{addonType:"append"},i.a.createElement(O.a,{className:"metrics-explorer-btn",title:"Open metrics explorer",onClick:function(){return v(!0)}},i.a.createElement(C.a,{icon:j.j})),i.a.createElement(O.a,{className:"execute-btn",color:"primary",onClick:l},"Execute"))),i.a.createElement(ve,{show:b,updateShow:v,metrics:r,insertAtCursor:function(e){var t=h.current;if(null!==t){var a=t.state.selection.ranges[0],n=a.from,r=a.to;t.dispatch(t.state.update({changes:{from:n,to:r,insert:e}}))}}}))},qe=a(5),Ue=(a(268),a(269),a(270),a(55));Ue.c.add(j.h,j.i,j.d,j.c,j.b,j.q),Ue.a.watch();var Be=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).timeInputRef=i.a.createRef(),e.$time=null,e.getBaseTime=function(){return e.props.time||J()().valueOf()},e.calcShiftRange=function(){return e.props.range/2},e.increaseTime=function(){var t=e.getBaseTime()+e.calcShiftRange();e.props.onChangeTime(t)},e.decreaseTime=function(){var t=e.getBaseTime()-e.calcShiftRange();e.props.onChangeTime(t)},e.clearTime=function(){e.props.onChangeTime(null)},e.timezone=function(){return e.props.useLocalTime?J.a.tz.guess():"UTC"},e}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.$time=r()(this.timeInputRef.current),this.$time.datetimepicker({icons:{today:"fas fa-calendar-check"},buttons:{showClose:!0,showToday:!0},sideBySide:!0,format:"YYYY-MM-DD HH:mm:ss",locale:"en",timeZone:this.timezone(),defaultDate:this.props.time}),this.$time.on("change.datetimepicker",(function(t){t.date&&e.props.onChangeTime(t.date.valueOf())}))}},{key:"componentWillUnmount",value:function(){this.$time.datetimepicker("destroy")}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.time,n=t.useLocalTime;e.time!==a&&this.$time.datetimepicker("date",a?J()(a):null),e.useLocalTime!==n&&this.$time.datetimepicker("options",{timeZone:this.timezone(),defaultDate:null})}},{key:"render",value:function(){var e=this;return i.a.createElement(ie.a,{className:"time-input",size:"sm"},i.a.createElement(le.a,{addonType:"prepend"},i.a.createElement(O.a,{title:"Decrease time",onClick:this.decreaseTime},i.a.createElement(C.a,{icon:j.h,fixedWidth:!0}))),i.a.createElement(ce.a,{placeholder:this.props.placeholder,innerRef:this.timeInputRef,onFocus:function(){return e.$time.datetimepicker("show")},onBlur:function(){return e.$time.datetimepicker("hide")},onKeyDown:function(t){return["Escape","Enter"].includes(t.key)&&e.$time.datetimepicker("hide")}}),this.props.time&&i.a.createElement(le.a,{addonType:"append"},i.a.createElement(O.a,{outline:!0,className:"clear-time-btn",title:"Clear time",onClick:this.clearTime},i.a.createElement(C.a,{icon:j.q,fixedWidth:!0}))),i.a.createElement(le.a,{addonType:"append"},i.a.createElement(O.a,{title:"Increase time",onClick:this.increaseTime},i.a.createElement(C.a,{icon:j.i,fixedWidth:!0}))))}}]),a}(o.Component),Ve=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).rangeRef=i.a.createRef(),e.resolutionRef=i.a.createRef(),e.rangeSteps=[1,10,60,300,900,1800,3600,7200,21600,43200,86400,172800,604800,1209600,2419200,4838400,9676800,15724800,31536e3,63072e3].map((function(e){return 1e3*e})),e.onChangeRangeInput=function(t){var a=bt(t);null===a?e.changeRangeInput(e.props.range):e.props.onChangeRange(a)},e.changeRangeInput=function(t){e.rangeRef.current.value=vt(t)},e.increaseRange=function(){var t,a=Object(qe.a)(e.rangeSteps);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(e.props.range<n)return e.changeRangeInput(n),void e.props.onChangeRange(n)}}catch(r){a.e(r)}finally{a.f()}},e.decreaseRange=function(){var t,a=Object(qe.a)(e.rangeSteps.slice().reverse());try{for(a.s();!(t=a.n()).done;){var n=t.value;if(e.props.range>n)return e.changeRangeInput(n),void e.props.onChangeRange(n)}}catch(r){a.e(r)}finally{a.f()}},e}return Object(Z.a)(a,[{key:"componentDidUpdate",value:function(e){e.range!==this.props.range&&this.changeRangeInput(this.props.range),e.resolution!==this.props.resolution&&(this.resolutionRef.current.value=null!==this.props.resolution?this.props.resolution.toString():"")}},{key:"render",value:function(){var e=this;return i.a.createElement(w.a,{inline:!0,className:"graph-controls",onSubmit:function(e){return e.preventDefault()}},i.a.createElement(ie.a,{className:"range-input",size:"sm"},i.a.createElement(le.a,{addonType:"prepend"},i.a.createElement(O.a,{title:"Decrease range",onClick:this.decreaseRange},i.a.createElement(C.a,{icon:j.k,fixedWidth:!0}))),i.a.createElement(ce.a,{defaultValue:vt(this.props.range),innerRef:this.rangeRef,onBlur:function(){return e.onChangeRangeInput(e.rangeRef.current.value)},onKeyDown:function(t){return"Enter"===t.key&&e.onChangeRangeInput(e.rangeRef.current.value)}}),i.a.createElement(le.a,{addonType:"append"},i.a.createElement(O.a,{title:"Increase range",onClick:this.increaseRange},i.a.createElement(C.a,{icon:j.m,fixedWidth:!0})))),i.a.createElement(Be,{time:this.props.endTime,useLocalTime:this.props.useLocalTime,range:this.props.range,placeholder:"End time",onChangeTime:this.props.onChangeEndTime}),i.a.createElement(ce.a,{placeholder:"Res. (s)",className:"resolution-input",defaultValue:null!==this.props.resolution?this.props.resolution.toString():"",innerRef:this.resolutionRef,onBlur:function(){var t=parseInt(e.resolutionRef.current.value);e.props.onChangeResolution(t||null)},bsSize:"sm"}),i.a.createElement(S.a,{className:"stacked-input",size:"sm"},i.a.createElement(O.a,{title:"Show unstacked line graph",onClick:function(){return e.props.onChangeStacking(!1)},active:!this.props.stacked},i.a.createElement(C.a,{icon:j.f,fixedWidth:!0})),i.a.createElement(O.a,{title:"Show stacked graph",onClick:function(){return e.props.onChangeStacking(!0)},active:this.props.stacked},i.a.createElement(C.a,{icon:j.e,fixedWidth:!0}))),i.a.createElement(S.a,{className:"show-exemplars",size:"sm"},this.props.showExemplars?i.a.createElement(O.a,{title:"Hide exemplars",onClick:function(){return e.props.onChangeShowExemplars(!1)},active:!0},"Hide Exemplars"):i.a.createElement(O.a,{title:"Show exemplars",onClick:function(){return e.props.onChangeShowExemplars(!0)},active:!1},"Show Exemplars")))}}]),a}(o.Component),Ye=a(172),Qe=function(e){var t=e.labels,a=e.format;return null===t?i.a.createElement(i.a.Fragment,null,"scalar"):a?function(){var e=[],a=!0;for(var n in t)"__name__"!==n&&(e.push(i.a.createElement("span",{key:n},!a&&", ",i.a.createElement("span",{className:"legend-label-name"},n),"=",i.a.createElement("span",{className:"legend-label-value"},'"',t[n],'"'))),a&&(a=!1));return i.a.createElement("div",null,i.a.createElement("span",{className:"legend-metric-name"},t.__name__||""),i.a.createElement("span",{className:"legend-label-brace"},"{"),e,i.a.createElement("span",{className:"legend-label-brace"},"}"))}():i.a.createElement(i.a.Fragment,null,gt(t))},Ge=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedIndexes:[]},e.handleSeriesSelect=function(t){return function(a){var n=e.state.selectedIndexes,r=[t];if(a.ctrlKey||a.metaKey){var o=e.props.chartData;r=n.includes(t)?n.filter((function(e){return e!==t})):0===n.length?o.reduce((function(e,a,n){return n===t?e:[].concat(Object($.a)(e),[n])}),[]):[].concat(Object($.a)(n),[t])}else 1===n.length&&n.includes(t)&&(r=[]);e.setState({selectedIndexes:r}),e.props.onSeriesToggle(r,t)}},e}return Object(Z.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.shouldReset&&e.shouldReset!==this.props.shouldReset&&this.setState({selectedIndexes:[]})}},{key:"render",value:function(){var e=this,t=this.props,a=t.chartData,n=t.onLegendMouseOut,r=t.onHover,o=this.state.selectedIndexes,l=a.length>1&&0===o.length;return i.a.createElement("div",{className:"graph-legend",onMouseOut:l?n:void 0},a.map((function(t){var n=t.index,s=t.color,c=t.labels;return i.a.createElement("div",{style:{opacity:0===o.length||o.includes(n)?1:.5},onClick:a.length>1?e.handleSeriesSelect(n):void 0,onMouseOver:l?r(n):void 0,key:n,className:"legend-item"},i.a.createElement("span",{className:"legend-swatch",style:{backgroundColor:s}}),i.a.createElement(Qe,{labels:c,format:!0}))})),a.length>1&&i.a.createElement("div",{className:"pl-1 mt-1 text-muted",style:{fontSize:13}},"Click: select series, ",navigator.platform.includes("Mac")?"CMD":"CTRL"," + click: toggle multiple series"))}}]),a}(o.PureComponent),$e=function(e){if(null===e)return"null";var t=Math.abs(e);if(t>=1e24)return(e/1e24).toFixed(2)+"Y";if(t>=1e21)return(e/1e21).toFixed(2)+"Z";if(t>=1e18)return(e/1e18).toFixed(2)+"E";if(t>=1e15)return(e/1e15).toFixed(2)+"P";if(t>=1e12)return(e/1e12).toFixed(2)+"T";if(t>=1e9)return(e/1e9).toFixed(2)+"G";if(t>=1e6)return(e/1e6).toFixed(2)+"M";if(t>=1e3)return(e/1e3).toFixed(2)+"k";if(t>=1)return e.toFixed(2);if(0===t)return e.toFixed(2);if(t<1e-23)return(e/1e-24).toFixed(2)+"y";if(t<1e-20)return(e/1e-21).toFixed(2)+"z";if(t<1e-17)return(e/1e-18).toFixed(2)+"a";if(t<1e-14)return(e/1e-15).toFixed(2)+"f";if(t<1e-11)return(e/1e-12).toFixed(2)+"p";if(t<1e-8)return(e/1e-9).toFixed(2)+"n";if(t<1e-5)return(e/1e-6).toFixed(2)+"\xb5";if(t<.01)return(e/.001).toFixed(2)+"m";if(t<=1)return e.toFixed(2);throw Error("couldn't format a value, this is a bug")},Ke=function(e,t,a){var n=r.a.color.parse(e),o=n.r,i=n.g,l=n.b;if(!a)return"rgba(".concat(o,", ").concat(i,", ").concat(l,", ").concat(t,")");var s=255*(1-t);return"rgb(".concat(Math.round(s+t*o),",").concat(Math.round(s+t*i),",").concat(Math.round(s+t*l),")")},Je=function(e,t){return function(a,n){return Object(P.a)(Object(P.a)({},a),{},{color:Ke(a.color,n!==e?.3:1,t)})}},Xe=function(e,t){return{grid:{hoverable:!0,clickable:!0,autoHighlight:!0,mouseActiveRadius:100},legend:{show:!1},xaxis:{mode:"time",showTicks:!0,showMinorTicks:!0,timeBase:"milliseconds",timezone:t?"browser":void 0},yaxis:{tickFormatter:$e},crosshair:{mode:"xy",color:"#bbb"},tooltip:{show:!0,cssClass:"graph-tooltip",content:function(e,a,n,r){var o=r.series,i=o.labels,l=o.color,s=J()(a);t||(s=s.utc());var c=function(e){return'\n            <div class="labels">\n              '.concat(0===Object.keys(e).length?'<div class="mb-1 font-italic">no labels</div>':"","\n              ").concat(e.__name__?'<div class="mb-1"><strong>'.concat(e.__name__,"</strong></div>"):"","\n              ").concat(Object.keys(e).filter((function(e){return"__name__"!==e})).map((function(t){return'<div class="mb-1"><strong>'.concat(t,"</strong>: ").concat(ft(e[t]),"</div>")})).join(""),"\n            </div>")};return'\n            <div class="date">'.concat(s.format("YYYY-MM-DD HH:mm:ss Z"),'</div>\n            <div>\n              <span class="detail-swatch" style="background-color: ').concat(l,'"></span>\n              <span>').concat(i.__name__||"value",": <strong>").concat(n,'</strong></span>\n            </div>\n            <div class="mt-2 mb-1 font-weight-bold">').concat("seriesLabels"in o?"Trace exemplar:":"Series:","</div>\n            ").concat(c(i),"\n            ").concat("seriesLabels"in o?'\n            <div class="mt-2 mb-1 font-weight-bold">Associated series:</div>'.concat(c(o.seriesLabels),"\n"):"","\n          ").trimEnd()},defaultTheme:!1,lines:!0},series:{stack:!1,lines:{lineWidth:e?1:2,steps:!1,fill:e},shadowSize:0}}},Ze=function(e){var t,a=e.queryParams,n=e.data,o=e.exemplars,i=e.stacked,l=function(e){var t=["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],a=t.length,n=0;return e.result.map((function(e,o){return o%a===0&&o&&(n=n>=0?n<.5?-n-.2:0:-n),r.a.color.parse(t[o%a]||"#666").scale("rgb",1+n)}))}(n),s=a,c=s.startTime,u=s.endTime,m=s.resolution,p=0,d=[],h={},f=Object(qe.a)(o||[]);try{for(f.s();!(t=f.n()).done;){var g,b=t.value,v=Object(qe.a)(b.exemplars);try{for(v.s();!(g=v.n()).done;){var x=g.value,E=x.labels,y=x.value,k=x.timestamp,w=et(y)||0;p+=w,d.push(w);var S=1e3*Math.floor(k/((u-c)/60)*.8);h[S]||(h[S]=[]),h[S].push({seriesLabels:b.seriesLabels,labels:E,data:[[1e3*k,w]],points:{symbol:tt},color:"#0275d8"})}}catch(C){v.e(C)}finally{v.f()}}}catch(C){f.e(C)}finally{f.f()}var O=at(p,d);return{series:n.result.map((function(e,t){for(var a=e.values,n=e.metric,r=[],o=0,s=c;s<=u;s+=m){var p=a[o];a.length>o&&p[0]<s+m/100?(r.push([1e3*p[0],et(p[1])]),o++):r.push([1e3*s,null])}return{labels:null!==n?n:{},color:l[t].toString(),stack:i,data:r,index:t}})),exemplars:Object.values(h).flatMap((function(e){return 1===e.length?e[0]:e.sort((function(e,t){return nt(t)-nt(e)})).reduce((function(e,t){if(0===e.length)e.push(t);else{var a=e[e.length-1];nt(a)-nt(t)>=2*O&&e.push(t)}return e}),[])}))}},et=function(e){var t=parseFloat(e);return isNaN(t)?null:t},tt=function(e,t,a){a-=3.5,t>e.canvas.clientWidth-59&&(t=e.canvas.clientWidth-59),a>e.canvas.clientHeight-40&&(a=e.canvas.clientHeight-40),e.translate(t,a),e.rotate(Math.PI/4),e.translate(-t,-a),e.fillStyle="#92bce1",e.fillRect(t,a,7,7),e.strokeStyle="#0275d8",e.lineWidth=1,e.strokeRect(t,a,7,7)},at=function(e,t){var a=e/t.length,n=0;return t.map((function(e){return n+=Math.pow(e-a,2)})),n/=t.length,Math.sqrt(n)},nt=function(e){return e.data[0][1]};a(271),a(272),a(273),a(274),a(275);var rt,ot=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).chartRef=i.a.createRef(),e.$chart=void 0,e.rafID=0,e.selectedSeriesIndexes=[],e.state={chartData:Ze(e.props),selectedExemplarLabels:{exemplar:{},series:{}}},e.plot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[].concat(Object($.a)(e.state.chartData.series),Object($.a)(e.state.chartData.exemplars));e.chartRef.current&&(e.destroyPlot(),e.$chart=r.a.plot(r()(e.chartRef.current),t,Xe(e.props.stacked,e.props.useLocalTime)))},e.destroyPlot=function(){ht(e.$chart)&&e.$chart.destroy()},e.handleSeriesSelect=function(t,a){var n=e.state.chartData;e.plot(1===e.selectedSeriesIndexes.length&&e.selectedSeriesIndexes.includes(a)?[].concat(Object($.a)(n.series.map(Je(a,e.props.stacked))),Object($.a)(n.exemplars)):[].concat(Object($.a)(n.series.filter((function(e,a){return t.includes(a)}))),Object($.a)(n.exemplars.filter((function(e){e:for(var a in t){for(var r in n.series[t[a]].labels)if(e.seriesLabels[r]!==n.series[t[a]].labels[r])continue e;return!0}return!1}))))),e.selectedSeriesIndexes=t},e.handleSeriesHover=function(t){return function(){e.rafID&&cancelAnimationFrame(e.rafID),e.rafID=requestAnimationFrame((function(){e.plotSetAndDraw([].concat(Object($.a)(e.state.chartData.series.map(Je(t,e.props.stacked))),Object($.a)(e.state.chartData.exemplars)))}))}},e.handleLegendMouseOut=function(){cancelAnimationFrame(e.rafID),e.plotSetAndDraw()},e.handleResize=function(){ht(e.$chart)&&e.plot(e.$chart.getData())},e}return Object(Z.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,n=a.data,r=a.stacked,o=a.useLocalTime,i=a.showExemplars;e.data!==n?(this.selectedSeriesIndexes=[],this.setState({chartData:Ze(this.props)},this.plot)):e.stacked!==r&&this.setState({chartData:Ze(this.props)},(function(){0===t.selectedSeriesIndexes.length?t.plot():t.plot([].concat(Object($.a)(t.state.chartData.series.filter((function(e,a){return t.selectedSeriesIndexes.includes(a)}))),Object($.a)(t.state.chartData.exemplars)))})),e.useLocalTime!==o&&this.plot(),e.showExemplars===i||i||this.setState({chartData:{series:this.state.chartData.series,exemplars:[]},selectedExemplarLabels:{exemplar:{},series:{}}},(function(){t.plot()}))}},{key:"componentDidMount",value:function(){var e=this;this.plot(),r()(".graph-".concat(this.props.id)).bind("plotclick",(function(t,a,n){n&&"seriesLabels"in n.series?e.setState({selectedExemplarLabels:{exemplar:n.series.labels,series:n.series.seriesLabels},chartData:e.state.chartData}):e.setState({chartData:e.state.chartData,selectedExemplarLabels:{exemplar:{},series:{}}})}))}},{key:"componentWillUnmount",value:function(){this.destroyPlot()}},{key:"plotSetAndDraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[].concat(Object($.a)(this.state.chartData.series),Object($.a)(this.state.chartData.exemplars));ht(this.$chart)&&(this.$chart.setData(e),this.$chart.draw())}},{key:"render",value:function(){var e=this,t=this.state,a=t.chartData,n=t.selectedExemplarLabels;return i.a.createElement("div",{className:"graph-".concat(this.props.id)},i.a.createElement(Ye.a,{handleWidth:!0,onResize:this.handleResize,skipOnMount:!0}),i.a.createElement("div",{className:"graph-chart",ref:this.chartRef}),Object.keys(n.exemplar).length>0?i.a.createElement("div",{className:"graph-selected-exemplar"},i.a.createElement("div",{className:"font-weight-bold"},"Selected exemplar labels:"),i.a.createElement("div",{className:"labels mt-1 ml-3"},Object.keys(n.exemplar).map((function(e,t){return i.a.createElement("div",{key:t},i.a.createElement("strong",null,e),": ",n.exemplar[e])}))),i.a.createElement("div",{className:"font-weight-bold mt-3"},"Associated series labels:"),i.a.createElement("div",{className:"labels mt-1 ml-3"},Object.keys(n.series).map((function(e,t){return i.a.createElement("div",{key:t},i.a.createElement("strong",null,e),": ",n.series[e])}))),i.a.createElement(O.a,{size:"small",color:"light",style:{position:"absolute",top:5,right:5},title:"Hide selected exemplar details",onClick:function(){return e.setState({chartData:e.state.chartData,selectedExemplarLabels:{exemplar:{},series:{}}})}},i.a.createElement(C.a,{icon:j.q}))):null,i.a.createElement(Ge,{shouldReset:0===this.selectedSeriesIndexes.length,chartData:a.series,onHover:this.handleSeriesHover,onLegendMouseOut:this.handleLegendMouseOut,onSeriesToggle:this.handleSeriesSelect}),i.a.createElement("br",{style:{clear:"both"}}))}}]),a}(o.PureComponent),it=function(e){var t=e.data,a=e.exemplars,n=e.stacked,r=e.useLocalTime,o=e.lastQueryParams,l=e.showExemplars,s=e.id;return ht(t)?0===t.result.length?i.a.createElement(U.a,{color:"secondary"},"Empty query result"):"matrix"!==t.resultType?i.a.createElement(U.a,{color:"danger"},"Query result is of wrong type '",t.resultType,"', should be 'matrix' (range vector)."):i.a.createElement(ot,{data:t,exemplars:a,stacked:n,useLocalTime:r,showExemplars:l,queryParams:o,id:s}):i.a.createElement(U.a,{color:"light"},"No data queried yet")},lt=function(e){return e.length>1e4?e.slice(0,1e4):e},st=function(e){var t=e.data;if(null===t)return i.a.createElement(U.a,{color:"light"},"No data queried yet");if(null===t.result||0===t.result.length)return i.a.createElement(U.a,{color:"secondary"},"Empty query result");var a=[],n=!1,r=t.result.length<=1e3;switch(t.resultType){case"vector":n=(a=lt(t.result).map((function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,i.a.createElement(Qe,{labels:e.metric,format:r})),i.a.createElement("td",null,e.value[1]))}))).length!==t.result.length;break;case"matrix":n=(a=lt(t.result).map((function(e,t){var a=e.values.map((function(e){return e[1]+" @"+e[0]})).join("\n");return i.a.createElement("tr",{style:{whiteSpace:"pre"},key:t},i.a.createElement("td",null,i.a.createElement(Qe,{labels:e.metric,format:r})),i.a.createElement("td",null,a))}))).length!==t.result.length;break;case"scalar":a.push(i.a.createElement("tr",{key:"0"},i.a.createElement("td",null,"scalar"),i.a.createElement("td",null,t.result[1])));break;case"string":a.push(i.a.createElement("tr",{key:"0"},i.a.createElement("td",null,"string"),i.a.createElement("td",null,t.result[1])));break;default:return i.a.createElement(U.a,{color:"danger"},"Unsupported result value type")}return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(U.a,{color:"danger"},i.a.createElement("strong",null,"Warning:")," Fetched ",t.result.length," metrics, only displaying first ",a.length,"."),!r&&i.a.createElement(U.a,{color:"secondary"},i.a.createElement("strong",null,"Notice:")," Showing more than ",1e3," series, turning off label formatting for performance reasons."),i.a.createElement(G.a,{hover:!0,size:"sm",className:"data-table"},i.a.createElement("tbody",null,a)))},ct=function(e){var t=e.loadTime,a=e.resolution,n=e.resultSeries;return i.a.createElement("div",{className:"query-stats"},i.a.createElement("span",{className:"float-right"},"Load time: ",t,"ms \u2002 Resolution: ",a,"s \u2002 Result series: ",n))};!function(e){e.Graph="graph",e.Table="table"}(rt||(rt={}));var ut={type:rt.Table,expr:"",range:36e5,endTime:null,resolution:null,stacked:!1,showExemplars:!1},mt=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).abortInFlightFetch=null,n.executeQuery=Object(A.a)(F.a.mark((function e(){var t,a,r,o,i,l,s,c,u,m,p,d,h,f,g;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.exprInputValue,a=Date.now(),n.props.onExecuteQuery(t),n.props.options.expr!==t&&n.setOptions({expr:t}),""!==t){e.next=6;break}return e.abrupt("return");case 6:n.abortInFlightFetch&&(n.abortInFlightFetch(),n.abortInFlightFetch=null),r=new AbortController,n.abortInFlightFetch=function(){return r.abort()},n.setState({loading:!0}),o=n.getEndTime().valueOf()/1e3,i=o-n.props.options.range/1e3,l=n.props.options.resolution||Math.max(Math.floor(n.props.options.range/25e4),1),s=new URLSearchParams({query:t}),e.t0=n.props.options.type,e.next="graph"===e.t0?17:"table"===e.t0?22:25;break;case 17:return c="query_range",s.append("start",i.toString()),s.append("end",o.toString()),s.append("step",l.toString()),e.abrupt("break",26);case 22:return c="query",s.append("time",o.toString()),e.abrupt("break",26);case 25:throw new Error('Invalid panel type "'+n.props.options.type+'"');case 26:return e.prev=26,e.next=29,fetch("".concat(n.props.pathPrefix,"/").concat("api/v1","/").concat(c,"?").concat(s),{cache:"no-store",credentials:"same-origin",signal:r.signal}).then((function(e){return e.json()}));case 29:if("success"===(u=e.sent).status){e.next=32;break}throw new Error(u.error||"invalid response JSON");case 32:if("graph"!==n.props.options.type||!n.props.options.showExemplars){e.next=39;break}return s.delete("step"),e.next=36,fetch("".concat(n.props.pathPrefix,"/").concat("api/v1","/query_exemplars?").concat(s),{cache:"no-store",credentials:"same-origin",signal:r.signal}).then((function(e){return e.json()}));case 36:if("success"===(m=e.sent).status){e.next=39;break}throw new Error(m.error||"invalid response JSON");case 39:d=0,u.data&&(h=u.data,f=h.resultType,g=h.result,"scalar"===f?d=1:g&&g.length>0&&(d=g.length)),n.setState({error:null,data:u.data,exemplars:null===(p=m)||void 0===p?void 0:p.data,warnings:u.warnings,lastQueryParams:{startTime:i,endTime:o,resolution:l},stats:{loadTime:Date.now()-a,resolution:l,resultSeries:d},loading:!1}),n.abortInFlightFetch=null,e.next=50;break;case 45:if(e.prev=45,e.t1=e.catch(26),"AbortError"!==e.t1.name){e.next=49;break}return e.abrupt("return");case 49:n.setState({error:"Error executing query: "+e.t1.message,loading:!1});case 50:case"end":return e.stop()}}),e,null,[[26,45]])}))),n.handleExpressionChange=function(e){n.setState({exprInputValue:e})},n.handleChangeRange=function(e){n.setOptions({range:e})},n.getEndTime=function(){return null===n.props.options.endTime?J()():n.props.options.endTime},n.handleChangeEndTime=function(e){n.setOptions({endTime:e})},n.handleChangeResolution=function(e){n.setOptions({resolution:e})},n.handleChangeType=function(e){n.props.options.type!==e&&(n.setState({data:null}),n.setOptions({type:e}))},n.handleChangeStacking=function(e){n.setOptions({stacked:e})},n.handleChangeShowExemplars=function(e){n.setOptions({showExemplars:e})},n.state={data:null,exemplars:[],lastQueryParams:null,loading:!1,warnings:null,error:null,stats:null,exprInputValue:e.options.expr},n}return Object(Z.a)(a,[{key:"componentDidUpdate",value:function(e){var t=e.options,a=this.props.options,n=a.endTime,r=a.range,o=a.resolution,i=a.showExemplars,l=a.type;t.endTime===n&&t.range===r&&t.resolution===o&&t.type===l&&i===t.showExemplars||this.executeQuery()}},{key:"componentDidMount",value:function(){this.executeQuery()}},{key:"setOptions",value:function(e){var t=Object(P.a)(Object(P.a)({},this.props.options),e);this.props.onOptionsChanged(t)}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.pastQueries,r=a.metricNames,o=a.options;return i.a.createElement("div",{className:"panel"},i.a.createElement(ae.a,null,i.a.createElement(ne.a,null,this.props.useExperimentalEditor?i.a.createElement(He,{value:this.state.exprInputValue,onExpressionChange:this.handleExpressionChange,executeQuery:this.executeQuery,loading:this.state.loading,enableAutocomplete:this.props.enableAutocomplete,enableHighlighting:this.props.enableHighlighting,enableLinter:this.props.enableLinter,queryHistory:n,metricNames:r}):i.a.createElement(xe,{value:this.state.exprInputValue,onExpressionChange:this.handleExpressionChange,executeQuery:this.executeQuery,loading:this.state.loading,enableAutocomplete:this.props.enableAutocomplete,queryHistory:n,metricNames:r}))),i.a.createElement(ae.a,null,i.a.createElement(ne.a,null,this.state.error&&i.a.createElement(U.a,{color:"danger"},this.state.error))),null===(e=this.state.warnings)||void 0===e?void 0:e.map((function(e,t){return i.a.createElement(ae.a,{key:t},i.a.createElement(ne.a,null,e&&i.a.createElement(U.a,{color:"warning"},e)))})),i.a.createElement(ae.a,null,i.a.createElement(ne.a,null,i.a.createElement(h.a,{tabs:!0},i.a.createElement(f.a,null,i.a.createElement(g.a,{className:"table"===o.type?"active":"",onClick:function(){return t.handleChangeType(rt.Table)}},"Table")),i.a.createElement(f.a,null,i.a.createElement(g.a,{className:"graph"===o.type?"active":"",onClick:function(){return t.handleChangeType(rt.Graph)}},"Graph")),!this.state.loading&&!this.state.error&&this.state.stats&&i.a.createElement(ct,this.state.stats)),i.a.createElement(re.a,{activeTab:o.type},i.a.createElement(oe.a,{tabId:"table"},"table"===o.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"table-controls"},i.a.createElement(Be,{time:o.endTime,useLocalTime:this.props.useLocalTime,range:o.range,placeholder:"Evaluation time",onChangeTime:this.handleChangeEndTime})),i.a.createElement(st,{data:this.state.data}))),i.a.createElement(oe.a,{tabId:"graph"},"graph"===this.props.options.type&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ve,{range:o.range,endTime:o.endTime,useLocalTime:this.props.useLocalTime,resolution:o.resolution,stacked:o.stacked,showExemplars:o.showExemplars,onChangeRange:this.handleChangeRange,onChangeEndTime:this.handleChangeEndTime,onChangeResolution:this.handleChangeResolution,onChangeStacking:this.handleChangeStacking,onChangeShowExemplars:this.handleChangeShowExemplars}),i.a.createElement(it,{data:this.state.data,exemplars:this.state.exemplars,stacked:o.stacked,useLocalTime:this.props.useLocalTime,showExemplars:o.showExemplars,lastQueryParams:this.state.lastQueryParams,id:this.props.id})))))),i.a.createElement(ae.a,null,i.a.createElement(ne.a,null,i.a.createElement(O.a,{className:"float-right",color:"link",onClick:this.props.removePanel,size:"sm"},"Remove Panel"))))}}]),a}(o.Component),pt=function(){return"_".concat(Math.random().toString(36).substr(2,9))},dt=function(e){return e.length>0},ht=function(e){return null!==e&&void 0!==e},ft=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'/]/g,(function(e){return t[e]}))},gt=function(e){if(null===e)return"scalar";var t=(e.__name__||"")+"{",a=[];for(var n in e)"__name__"!==n&&a.push(n+'="'+e[n]+'"');return t+=a.join(", ")+"}"},bt=function(e){if(""===e)return null;if("0"===e)return 0;var t=new RegExp("^(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?$"),a=e.match(t);if(!a)return null;var n=0,r=function(e,t){if(void 0!==a[e]){var r=parseInt(a[e]);n+=r*t}};return r(2,31536e6),r(4,6048e5),r(6,864e5),r(8,36e5),r(10,6e4),r(12,1e3),r(14,1),n},vt=function(e){var t=e,a="";if(0===t)return"0s";var n=function(e,n,r){if(!r||t%n===0){var o=Math.floor(t/n);o>0&&(a+="".concat(o).concat(e),t-=o*n)}};return n("y",31536e6,!0),n("w",6048e5,!0),n("d",864e5,!1),n("h",36e5,!1),n("m",6e4,!1),n("s",1e3,!1),n("ms",1,!1),a};function xt(e){return J.a.utc(e).valueOf()}var Et=function(e){var t=e<0?"-":"",a=e<0?-1*e:e,n=J.a.duration(a,"ms"),r=Math.floor(n.milliseconds()),o=Math.floor(n.seconds()),i=Math.floor(n.minutes()),l=Math.floor(n.hours()),s=Math.floor(n.asDays());return 0!==s?"".concat(t).concat(s,"d ").concat(l,"h ").concat(i,"m ").concat(o,"s"):0!==l?"".concat(t).concat(l,"h ").concat(i,"m ").concat(o,"s"):0!==i?"".concat(t).concat(i,"m ").concat(o,"s"):0!==o?"".concat(t).concat(o,".").concat(r,"s"):a>0?"".concat(t).concat(a.toFixed(3),"ms"):"0s"},yt=function(e,t){var a=xt(e);return a<0?"Never":Et(t-a)+" ago"},kt=/^g\d+\..+=.+$/,wt=function(e){if(""===e)return[];var t=e.substring(1).split("&");return t.reduce((function(e,a,n){var r=e.length,o="g".concat(r,".");if(a.startsWith("".concat(o,"expr="))){var i=o.length;return[].concat(Object($.a)(e),[{id:pt(),key:"".concat(r),options:t.slice(n).reduce((function(e,t){return t.startsWith(o)&&kt.test(t)?Object(P.a)(Object(P.a)({},e),St(t.substring(i))):e}),ut)}])}return e}),[])},St=function(e){var t=e.split("="),a=Object(c.a)(t,2),n=a[0],r=a[1],o=decodeURIComponent(r.replace(/\+/g," "));switch(n){case"expr":return{expr:o};case"tab":return{type:"0"===o?rt.Graph:rt.Table};case"stacked":return{stacked:"1"===o};case"show_exemplars":return{showExemplars:"1"===o};case"range_input":var i=bt(o);return ht(i)?{range:i}:{};case"end_input":case"moment_input":return{endTime:xt(o)};case"step_input":var l=parseInt(o);return l>0?{resolution:l}:{}}return{}},Ot=function(e){var t=e.key,a=e.options,n=function(e){return function(t,a){return"g".concat(e,".").concat(t,"=").concat(encodeURIComponent(a))}}(t),r=a.expr,o=a.type,i=a.stacked,l=a.range,s=a.endTime,c=a.resolution,u=a.showExemplars,m=!!ht(s)&&function(e){return J.a.utc(e).format("YYYY-MM-DD HH:mm:ss")}(s);return[n("expr",r),n("tab",o===rt.Graph?0:1),n("stacked",i?1:0),n("show_exemplars",u?1:0),n("range_input",vt(l)),m?"".concat(n("end_input",m),"&").concat(n("moment_input",m)):"",ht(c)?n("step_input",c):""].filter(dt).join("&")},Ct=function(e){return"../graph?g0.expr=".concat(encodeURIComponent(e),"&g0.tab=1&g0.stacked=0&g0.show_exemplars=0.g0.range_input=1h.")},jt=function(e,t){return Object.entries(e).map(t)},Tt=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];t.filter(Boolean).forEach((function(e){return e.apply(null,a)}))}},Mt={firing:"danger",pending:"warning",inactive:"success"},Nt=function(e){var t=e.annotations;return i.a.createElement(o.Fragment,null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:4},i.a.createElement("h5",{className:"font-weight-bold"},"Annotations"))),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:4},Object.entries(t).map((function(e,t){var a=Object(c.a)(e,2),n=a[0],r=a[1];return i.a.createElement("div",{key:t},i.a.createElement("strong",null,n),i.a.createElement("div",null,r))})))))},Lt=function(e){var t=e.rule,a=e.showAnnotations,n=Object(o.useState)(!1),r=Object(c.a)(n,2),l=r[0],s=r[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(U.a,{fade:!1,onClick:function(){return s(!l)},color:Mt[t.state],style:{cursor:"pointer"}},i.a.createElement(C.a,{icon:l?j.g:j.i,fixedWidth:!0}),i.a.createElement("strong",null,t.name)," (","".concat(t.alerts.length," active"),")"),i.a.createElement(d.a,{isOpen:l,className:"mb-2"},i.a.createElement("pre",{className:"alert-cell"},i.a.createElement("code",null,i.a.createElement("div",null,"name: ",i.a.createElement(u.a,{to:Ct('ALERTS{alertname="'.concat(t.name,'"}'))},t.name)),i.a.createElement("div",null,"expr: ",i.a.createElement(u.a,{to:Ct(t.query)},t.query)),t.duration>0&&i.a.createElement("div",null,i.a.createElement("div",null,"for: ",vt(1e3*t.duration))),t.labels&&Object.keys(t.labels).length>0&&i.a.createElement("div",null,i.a.createElement("div",null,"labels:"),Object.entries(t.labels).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return i.a.createElement("div",{className:"ml-4",key:a},a,": ",n)}))),t.annotations&&Object.keys(t.annotations).length>0&&i.a.createElement("div",null,i.a.createElement("div",null,"annotations:"),Object.entries(t.annotations).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return i.a.createElement("div",{className:"ml-4",key:a},a,": ",n)}))))),t.alerts.length>0&&i.a.createElement(G.a,{bordered:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Labels"),i.a.createElement("th",null,"State"),i.a.createElement("th",null,"Active Since"),i.a.createElement("th",null,"Value"))),i.a.createElement("tbody",null,t.alerts.map((function(e,t){return i.a.createElement(o.Fragment,{key:t},i.a.createElement("tr",null,i.a.createElement("td",{style:{verticalAlign:"middle"}},Object.entries(e.labels).map((function(e,t){var a=Object(c.a)(e,2),n=a[0],r=a[1];return i.a.createElement(Q.a,{key:t,color:"primary",className:"mr-1"},n,"=",r)}))),i.a.createElement("td",null,i.a.createElement("h5",{className:"m-0"},i.a.createElement(Q.a,{color:Mt[e.state]+" text-uppercase",className:"px-3"},e.state))),i.a.createElement("td",null,e.activeAt),i.a.createElement("td",null,(n=e.value,isNaN(Number(n))?n:Number(n)))),a&&i.a.createElement(Nt,{annotations:e.annotations}));var n}))))))},It=a(318),_t=a(319),zt=["children","wrapperStyles","id"],Dt=Object(o.memo)((function(e){var t=e.children,a=e.wrapperStyles,n=e.id,r=Object(q.a)(e,zt);return i.a.createElement(It.a,{className:"custom-control custom-checkbox",style:a},i.a.createElement(ce.a,Object.assign({},r,{id:n,type:"checkbox",className:"custom-control-input"})),i.a.createElement(_t.a,{style:{userSelect:"none"},className:"custom-control-label",for:n},t))}));function Rt(e,t){var a=JSON.parse(localStorage.getItem(e)||JSON.stringify(t)),n=Object(o.useState)(a),r=Object(c.a)(n,2),i=r[0],l=r[1];return Object(o.useEffect)((function(){var t=JSON.stringify(i);localStorage.setItem(e,t)}),[e,i]),[i,l]}var Ft=[["inactive","success"],["pending","warning"],["firing","danger"]],Pt=function(e){var t=e.groups,a=void 0===t?[]:t,n=e.statsCount,r=Rt("alerts-status-filter",{firing:!0,pending:!0,inactive:!0}),l=Object(c.a)(r,2),s=l[0],u=l[1],m=Rt("alerts-annotations-status",{checked:!1}),p=Object(c.a)(m,2),d=p[0],h=p[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"d-flex togglers-wrapper"},Ft.map((function(e){var t,a=Object(c.a)(e,2),r=a[0],o=a[1];return i.a.createElement(Dt,{key:r,wrapperStyles:{marginRight:10},checked:s[r],id:"".concat(r,"-toggler"),onChange:(t=r,function(){u(Object(P.a)(Object(P.a)({},s),{},Object(Y.a)({},t,!s[t])))})},i.a.createElement(Q.a,{color:o,className:"text-capitalize"},r," (",n[r],")"))})),i.a.createElement(Dt,{wrapperStyles:{marginLeft:"auto"},checked:d.checked,id:"show-annotations-toggler",onChange:function(e){var t=e.target;return h({checked:t.checked})}},i.a.createElement("span",{style:{fontSize:"0.9rem",lineHeight:1.9}},"Show annotations"))),a.map((function(e,t){return e.rules.some((function(e){return s[e.state]}))?i.a.createElement(o.Fragment,{key:t},i.a.createElement(At,{rules:e.rules},e.file," > ",e.name),e.rules.map((function(e,t){return s[e.state]&&i.a.createElement(Lt,{key:e.name+t,showAnnotations:d.checked,rule:e})}))):null})))},At=function(e){var t=e.rules,a=e.children,n=t.reduce((function(e,t){return Object(P.a)(Object(P.a)({},e),{},Object(Y.a)({},t.state,e[t.state]+t.alerts.length))}),{firing:0,pending:0});return i.a.createElement("div",{className:"group-info border rounded-sm",style:{lineHeight:1.1}},a,i.a.createElement("div",{className:"badges-wrapper"},ht(n.inactive)&&i.a.createElement(Q.a,{color:"success"},"inactive"),n.pending>0&&i.a.createElement(Q.a,{color:"warning"},"pending (",n.pending,")"),n.firing>0&&i.a.createElement(Q.a,{color:"danger"},"firing (",n.firing,")")))};Pt.displayName="Alerts";var Wt=V(Pt),Ht=function(){var e=k(),t=W("".concat(e,"/").concat("api/v1","/rules?type=alert")),a=t.response,n=t.error,r=t.isLoading,o={inactive:0,pending:0,firing:0};return a.data&&a.data.groups&&a.data.groups.forEach((function(e){return e.rules.forEach((function(e){return o[e.state]++}))})),i.a.createElement(Wt,Object.assign({},a.data,{statsCount:o,error:n,isLoading:r}))},qt=a(169),Ut=a.n(qt),Bt=function(e){var t=e.yaml;return i.a.createElement("pre",{className:"config-yaml"},t)};Bt.displayName="Config";var Vt=V(Bt),Yt=function(e){var t=e.error,a=e.data,n=Object(o.useState)(!1),r=Object(c.a)(n,2),l=r[0],s=r[1],u=a&&a.yaml;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Configuration\xa0",i.a.createElement(Ut.a,{text:u,onCopy:function(e,t){s(t),setTimeout(s,1500)}},i.a.createElement(O.a,{color:"light",disabled:!u},l?"Copied":"Copy to clipboard"))),i.a.createElement(Vt,{error:t,isLoading:!u,yaml:u}))},Qt=function(){var e=k(),t=W("".concat(e,"/").concat("api/v1","/status/config")),a=t.response,n=t.error;return i.a.createElement(Yt,{error:n,data:a.data})},Gt=function(e){var t=e.data,a=void 0===t?{}:t;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Command-Line Flags"),i.a.createElement(G.a,{bordered:!0,size:"sm",striped:!0},i.a.createElement("tbody",null,Object.keys(a).map((function(e){return i.a.createElement("tr",{key:e},i.a.createElement("th",null,e),i.a.createElement("td",null,a[e]))})))))},$t=V(Gt);Gt.displayName="Flags";var Kt=function(){var e=k(),t=W("".concat(e,"/").concat("api/v1","/status/flags")),a=t.response,n=t.error,r=t.isLoading;return i.a.createElement($t,{data:a.data,error:n,isLoading:r})},Jt=a(53),Xt=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("strong",null,e.title,":"),i.a.createElement(u.a,{className:"ml-4",to:Ct(e.expr)},e.text),i.a.createElement("br",null))},Zt=V((function(e){var t=e.response,a=function(e){switch(e){case"ok":return"success";case"err":return"danger";case"unknown":return"warning"}};if(t.data){var n=t.data.groups;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Rules"),n.map((function(e,t){return i.a.createElement(G.a,{bordered:!0,key:t},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("a",{href:"#"+e.name},i.a.createElement("h4",{id:e.name,className:"text-break"},e.name))),i.a.createElement("td",null,i.a.createElement("h4",null,yt(e.lastEvaluation,Object(Jt.now)()))),i.a.createElement("td",null,i.a.createElement("h4",null,Et(1e3*parseFloat(e.evaluationTime)))))),i.a.createElement("tbody",null,i.a.createElement("tr",{className:"font-weight-bold"},i.a.createElement("td",null,"Rule"),i.a.createElement("td",null,"State"),i.a.createElement("td",null,"Error"),i.a.createElement("td",null,"Last Evaluation"),i.a.createElement("td",null,"Evaluation Time")),e.rules.map((function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",{className:"rule-cell"},e.alerts?i.a.createElement(Xt,{title:"alert",text:e.name,expr:'ALERTS{alertname="'.concat(e.name,'"}')}):i.a.createElement(Xt,{title:"record",text:e.name,expr:e.name}),i.a.createElement(Xt,{title:"expr",text:e.query,expr:e.query}),e.duration>0&&i.a.createElement("div",null,i.a.createElement("strong",null,"for:")," ",vt(1e3*e.duration)),e.labels&&Object.keys(e.labels).length>0&&i.a.createElement("div",null,i.a.createElement("strong",null,"labels:"),Object.entries(e.labels).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return i.a.createElement("div",{className:"ml-4",key:a},a,": ",n)}))),e.alerts&&e.annotations&&Object.keys(e.annotations).length>0&&i.a.createElement("div",null,i.a.createElement("strong",null,"annotations:"),Object.entries(e.annotations).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return i.a.createElement("div",{className:"ml-4",key:a},a,": ",n)})))),i.a.createElement("td",null,i.a.createElement(Q.a,{color:a(e.health)},e.health.toUpperCase())),i.a.createElement("td",null,e.lastError?i.a.createElement(U.a,{color:"danger"},e.lastError):null),i.a.createElement("td",null,yt(e.lastEvaluation,Object(Jt.now)())),i.a.createElement("td",null,Et(1e3*parseFloat(e.evaluationTime))))}))))})))}return null})),ea=function(){var e=k(),t=W("".concat(e,"/").concat("api/v1","/rules")),a=t.response,n=t.error,r=t.isLoading;return i.a.createElement(Zt,{response:a,error:n,isLoading:r})},ta=function(e){var t=e.children,a=e.event,n=e.showMore;return i.a.createElement("h3",null,t,i.a.createElement(O.a,{size:"xs",onClick:a,style:{padding:"0.3em 0.3em 0.25em 0.3em",fontSize:"0.375em",marginLeft:"1em",verticalAlign:"baseline"},color:"primary"},"show ",n?"less":"more"))},aa=function(e){return Object.entries(e).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return i.a.createElement("div",{key:a},i.a.createElement(Q.a,{color:"primary",className:"mr-1"},"".concat(a,'="').concat(n,'"')))}))},na=function(e){var t=e.value,a=e.name,n=Object(o.useState)(!1),r=Object(c.a)(n,2),l=r[0],s=r[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(ta,{event:function(){s(!l)},showMore:l},i.a.createElement("span",{className:"target-head"},a))),l?i.a.createElement(G.a,{size:"sm",bordered:!0,hover:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Discovered Labels"),i.a.createElement("th",null,"Target Labels"))),i.a.createElement("tbody",null,t.map((function(e,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,aa(t[a].discoveredLabels)),t[a].isDropped?i.a.createElement("td",{style:{fontWeight:"bold"}},"Dropped"):i.a.createElement("td",null,aa(t[a].labels)))})))):null)},ra=function(e){var t=e.activeTargets,a=e.droppedTargets,n=function(e,t){var a,n={},r=Object(qe.a)(e);try{for(r.s();!(a=r.n()).done;){var o=a.value.scrapePool;n[o]||(n[o]={total:0,active:0}),n[o].total++,n[o].active++}}catch(c){r.e(c)}finally{r.f()}var i,l=Object(qe.a)(t);try{for(l.s();!(i=l.n()).done;){var s=i.value.discoveredLabels.job;n[s]||(n[s]={total:0,active:0}),n[s].total++}}catch(c){l.e(c)}finally{l.f()}return n}(t,a),r=function(e,t){var a,n={},r=Object(qe.a)(e);try{for(r.s();!(a=r.n()).done;){var o=a.value,i=o.scrapePool;n[i]||(n[i]=[]),n[i].push({discoveredLabels:o.discoveredLabels,labels:o.labels,isDropped:!1})}}catch(m){r.e(m)}finally{r.f()}var l,s=Object(qe.a)(t);try{for(s.s();!(l=s.n()).done;){var c=l.value,u=c.discoveredLabels.job;n[u]||(n[u]=[]),n[u].push({discoveredLabels:c.discoveredLabels,isDropped:!0,labels:{}})}}catch(m){s.e(m)}finally{s.f()}return n}(t,a);return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Service Discovery"),i.a.createElement("ul",null,jt(n,(function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return i.a.createElement("li",{key:a},i.a.createElement("a",{href:"#"+a},a," (",n.active," / ",n.total," active targets)"))}))),i.a.createElement("hr",null),jt(r,(function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return i.a.createElement(na,{value:n,name:a,key:a})})))};ra.displayName="ServiceDiscoveryContent";var oa=V(ra),ia=function(){var e=k(),t=W("".concat(e,"/").concat("api/v1","/targets")),a=t.response,n=t.error,r=t.isLoading;return i.a.createElement(oa,Object.assign({},a.data,{error:n,isLoading:r,componentTitle:"Service Discovery information"}))},la={startTime:{title:"Start time",customizeValue:function(e){return new Date(e).toUTCString()}},CWD:{title:"Working directory"},reloadConfigSuccess:{title:"Configuration reload",customizeValue:function(e){return e?"Successful":"Unsuccessful"}},lastConfigTime:{title:"Last successful configuration reload"},corruptionCount:{title:"WAL corruptions"},goroutineCount:{title:"Goroutines"},storageRetention:{title:"Storage retention"},activeAlertmanagers:{customRow:!0,customizeValue:function(e,t){return i.a.createElement(o.Fragment,{key:t},i.a.createElement("tr",null,i.a.createElement("th",null,"Endpoint")),e.map((function(e){var t=e.url,a=new URL(t),n=a.origin,r=a.pathname;return i.a.createElement("tr",{key:t},i.a.createElement("td",null,i.a.createElement("a",{href:t},n),r))})))}},droppedAlertmanagers:{skip:!0}},sa=function(e){var t=e.data,a=e.title;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,a),i.a.createElement(G.a,{className:"h-auto",size:"sm",bordered:!0,striped:!0},i.a.createElement("tbody",null,Object.entries(t).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1],r=la[a]||{},o=r.title,l=void 0===o?a:o,s=r.customizeValue,u=void 0===s?function(e){return e}:s,m=r.customRow;return r.skip?null:m?u(n,a):i.a.createElement("tr",{key:a},i.a.createElement("th",{className:"capitalize-title",style:{width:"35%"}},l),i.a.createElement("td",{className:"text-break"},u(n,l)))})))))},ca=V(sa);sa.displayName="Status";var ua=function(){var e=k(),t="".concat(e,"/").concat("api/v1");return i.a.createElement(i.a.Fragment,null,[{fetchResult:W("".concat(t,"/status/runtimeinfo")),title:"Runtime Information"},{fetchResult:W("".concat(t,"/status/buildinfo")),title:"Build Information"},{fetchResult:W("".concat(t,"/alertmanagers")),title:"Alertmanagers"}].map((function(e){var t=e.fetchResult,a=e.title,n=t.response,r=t.isLoading,o=t.error;return i.a.createElement(ca,{key:a,data:n.data,title:a,isLoading:r,error:o,componentTitle:a})})))},ma=function(e){var t=e.filter,a=e.setFilter,n=e.expanded,r=e.setExpanded,o=t.showHealthy,l=Object.values(n).every((function(e){return e})),s={all:{active:o,className:"all",color:"primary",onClick:function(){return a(Object(P.a)(Object(P.a)({},t),{},{showHealthy:!0}))}},unhealthy:{active:!o,className:"unhealthy",color:"primary",onClick:function(){return a(Object(P.a)(Object(P.a)({},t),{},{showHealthy:!1}))}},expansionState:{active:!1,className:"expansion",color:"primary",onClick:function(){return r((e=!l,Object.keys(n).reduce((function(t,a){return Object(P.a)(Object(P.a)({},t),{},Object(Y.a)({},a,e))}),{})));var e}}};return i.a.createElement(S.a,{className:"mt-3 mb-4"},i.a.createElement(O.a,s.all,"All"),i.a.createElement(O.a,s.unhealthy,"Unhealthy"),i.a.createElement(O.a,s.expansionState,l?"Collapse All":"Expand All"))},pa=a(46),da=a.n(pa),ha=function(e){var t,a=e.endpoint,n=e.globalUrl;try{t=new URL(a)}catch(p){return i.a.createElement(U.a,{color:"danger"},i.a.createElement("strong",null,"Error:")," ",p.message)}var r=t,o=r.host,l=r.pathname,s=r.protocol,u=r.searchParams,m=Array.from(u.entries());return i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{href:n},"".concat(s,"//").concat(o).concat(l)),m.length>0?i.a.createElement("br",null):null,m.map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return i.a.createElement(Q.a,{color:"primary",className:"mr-1",key:"".concat(a,"/").concat(n)},"".concat(a,'="').concat(n,'"'))})))},fa=a(322),ga=(a(289),a(170)),ba=a.n(ga),va=function(e){var t=e.discoveredLabels,a=e.labels,n=e.idx,r=e.scrapePool,l=Object(o.useState)(!1),s=Object(c.a)(l,2),u=s[0],m=s[1],p="series-labels-".concat(r,"-").concat(n);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:p,className:"series-labels-container"},Object.keys(a).map((function(e){return i.a.createElement(Q.a,{color:"primary",className:"mr-1",key:e},"".concat(e,'="').concat(a[e],'"'))}))),i.a.createElement(fa.a,{isOpen:u,target:CSS.escape(p),toggle:function(){return m(!u)},style:{maxWidth:"none",textAlign:"left"}},i.a.createElement("b",null,"Before relabeling:"),function(e){return Object.keys(e).map((function(t){return"".concat(t,'="').concat(e[t],'"')}))}(t).map((function(e,t){return i.a.createElement(o.Fragment,{key:t},i.a.createElement("br",null),i.a.createElement("span",{className:ba.a.discovered},e))}))))},xa=["Endpoint","State","Labels","Last Scrape","Scrape Duration","Error"],Ea=function(e){var t=e.scrapePool,a=e.targetGroup,n=e.expanded,r=e.toggleExpanded,o=a.upCount<a.targets.length?"danger":"normal",l="pool-".concat(t),s={href:"#".concat(l),id:l};return i.a.createElement("div",{className:da.a.container},i.a.createElement(ta,{event:r,showMore:n},i.a.createElement("a",Object.assign({className:da.a[o]},s),"".concat(t," (").concat(a.upCount,"/").concat(a.targets.length," up)"))),i.a.createElement(d.a,{isOpen:n},i.a.createElement(G.a,{className:da.a.table,size:"sm",bordered:!0,hover:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",{key:"header"},xa.map((function(e){return i.a.createElement("th",{key:e},e)})))),i.a.createElement("tbody",null,a.targets.map((function(e,t){var a=e.discoveredLabels,n=e.labels,r=e.scrapePool,o=e.scrapeUrl,l=e.globalUrl,s=e.lastError,c=e.lastScrape,u=e.lastScrapeDuration,m=e.health,p=function(e){switch(e.toLowerCase()){case"up":return"success";case"down":return"danger";default:return"warning"}}(m);return i.a.createElement("tr",{key:o},i.a.createElement("td",{className:da.a.endpoint},i.a.createElement(ha,{endpoint:o,globalUrl:l})),i.a.createElement("td",{className:da.a.state},i.a.createElement(Q.a,{color:p},m.toUpperCase())),i.a.createElement("td",{className:da.a.labels},i.a.createElement(va,{discoveredLabels:a,labels:n,scrapePool:r,idx:t})),i.a.createElement("td",{className:da.a["last-scrape"]},yt(c,Object(Jt.now)())),i.a.createElement("td",{className:da.a["scrape-duration"]},Et(1e3*u)),i.a.createElement("td",{className:da.a.errors},s?i.a.createElement("span",{className:"text-danger"},s):null))}))))))},ya=function(e){var t=e.activeTargets,a=t.reduce((function(e,t){var a=t.health,n=t.scrapePool,r="up"===a.toLowerCase()?1:0;return e[n]||(e[n]={upCount:0,targets:[]}),e[n].targets.push(t),e[n].upCount+=r,e}),{}),n=Rt("targets-page-filter",{showHealthy:!0,showUnhealthy:!0}),r=Object(c.a)(n,2),o=r[0],l=r[1],s=Rt("targets-page-expansion-state",Object.keys(a).reduce((function(e,t){return Object(P.a)(Object(P.a)({},e),{},Object(Y.a)({},t,!0))}),{})),u=Object(c.a)(s,2),m=u[0],p=u[1],d=o.showHealthy,h=o.showUnhealthy;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ma,{filter:o,setFilter:l,expanded:m,setExpanded:p}),Object.keys(a).filter((function(e){var t=a[e],n=t.upCount===t.targets.length;return n&&d||!n&&h})).map((function(e){return i.a.createElement(Ea,{key:e,scrapePool:e,targetGroup:a[e],expanded:m[e],toggleExpanded:function(){return p(Object(P.a)(Object(P.a)({},m),{},Object(Y.a)({},e,!m[e])))}})})))};ya.displayName="ScrapePoolContent";var ka=V(ya),wa=function(){var e=k(),t=W("".concat(e,"/").concat("api/v1","/targets?state=active")),a=t.response,n=t.error,r=t.isLoading,o=a.status,l="success"!==o&&"start fetching"!==o;return i.a.createElement(ka,Object.assign({},a.data,{error:l?new Error(o):n,isLoading:r,componentTitle:"Targets information"}))},Sa=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Targets"),i.a.createElement(wa,null))},Oa=["metrics","useLocalTime","useExperimentalEditor","queryHistoryEnabled","enableAutocomplete","enableHighlighting","enableLinter"],Ca=function(e){var t="?".concat(e.map(Ot).join("&"));window.history.pushState({},"",t)},ja=function(e){var t=e.metrics,a=void 0===t?[]:t,n=e.useLocalTime,r=e.useExperimentalEditor,l=e.queryHistoryEnabled,s=e.enableAutocomplete,u=e.enableHighlighting,m=e.enableLinter,p=Object(q.a)(e,Oa),d=Object(o.useState)(p.panels),h=Object(c.a)(d,2),f=h[0],g=h[1],b=Rt("history",[]),v=Object(c.a)(b,2),x=v[0],E=v[1];Object(o.useEffect)((function(){!f.length&&w(),window.onpopstate=function(){var e=wt(window.location.search);e.length>0&&g(e)}}),[]);var y=function(e){if(!(-1!==a.indexOf(e))&&e.length){var t=x.reduce((function(t,a){return a===e?t:[].concat(Object($.a)(t),[a])}),[e]);E(t.slice(0,50))}},w=function(){Tt(g,Ca)([].concat(Object($.a)(f),[{id:pt(),key:"".concat(f.length),options:ut}]))},S=k();return i.a.createElement(i.a.Fragment,null,f.map((function(e){var t=e.id,o=e.options;return i.a.createElement(mt,{pathPrefix:S,onExecuteQuery:y,key:t,id:t,options:o,onOptionsChanged:function(e){return Tt(g,Ca)(f.map((function(a){return t===a.id?Object(P.a)(Object(P.a)({},a),{},{options:e}):a})))},removePanel:function(){return Tt(g,Ca)(f.reduce((function(e,a){return a.id!==t?[].concat(Object($.a)(e),[Object(P.a)(Object(P.a)({},a),{},{key:"".concat(e.length)})]):e}),[]))},useExperimentalEditor:r,useLocalTime:n,metricNames:a,pastQueries:l?x:[],enableAutocomplete:s,enableHighlighting:u,enableLinter:m})})),i.a.createElement(O.a,{className:"d-block mb-3",color:"primary",onClick:w},"Add Panel"))},Ta=function(){var e=Object(o.useState)(0),t=Object(c.a)(e,2),a=t[0],n=t[1],r=Rt("use-new-editor",!0),l=Object(c.a)(r,2),s=l[0],u=l[1],m=Rt("use-local-time",!1),p=Object(c.a)(m,2),d=p[0],h=p[1],f=Rt("enable-query-history",!1),g=Object(c.a)(f,2),b=g[0],v=g[1],x=Rt("enable-metric-autocomplete",!0),E=Object(c.a)(x,2),y=E[0],w=E[1],S=Rt("enable-syntax-highlighting",!0),O=Object(c.a)(S,2),C=O[0],j=O[1],T=Rt("enable-linter",!0),M=Object(c.a)(T,2),N=M[0],L=M[1],I=k(),_=W("".concat(I,"/").concat("api/v1","/label/__name__/values")),z=_.response,D=_.error,R=(new Date).getTime()/1e3,F=W("".concat(I,"/").concat("api/v1","/query?query=time()")),P=F.response,A=F.error;return Object(o.useEffect)((function(){if(P.data){var e=P.data.result[0];n(Math.abs(R-e))}}),[P.data]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"clearfix"},i.a.createElement("div",{className:"float-left"},i.a.createElement(Dt,{wrapperStyles:{display:"inline-block"},id:"use-local-time-checkbox",onChange:function(e){var t=e.target;return h(t.checked)},defaultChecked:d},"Use local time"),i.a.createElement(Dt,{wrapperStyles:{marginLeft:20,display:"inline-block"},id:"query-history-checkbox",onChange:function(e){var t=e.target;return v(t.checked)},defaultChecked:b},"Enable query history"),i.a.createElement(Dt,{wrapperStyles:{marginLeft:20,display:"inline-block"},id:"autocomplete-checkbox",onChange:function(e){var t=e.target;return w(t.checked)},defaultChecked:y},"Enable autocomplete")),i.a.createElement("div",{className:"float-right"},i.a.createElement(Dt,{wrapperStyles:{display:"inline-block"},id:"use-experimental-editor-checkbox",onChange:function(e){var t=e.target;return u(t.checked)},defaultChecked:s},"Use experimental editor"),i.a.createElement(Dt,{wrapperStyles:{marginLeft:20,display:"inline-block"},id:"highlighting-checkbox",onChange:function(e){var t=e.target;return j(t.checked)},defaultChecked:C,disabled:!s},"Enable highlighting"),i.a.createElement(Dt,{wrapperStyles:{marginLeft:20,display:"inline-block"},id:"linter-checkbox",onChange:function(e){var t=e.target;return L(t.checked)},defaultChecked:N,disabled:!s},"Enable linter"))),(a>30||A)&&i.a.createElement(U.a,{color:"danger"},i.a.createElement("strong",null,"Warning: "),A&&"Unexpected response status when fetching server time: ".concat(A.message),a>=30&&"Error fetching server time: Detected ".concat(a," seconds time difference between your browser and the server. Prometheus relies on accurate time and time drift might cause unexpected query results.")),D&&i.a.createElement(U.a,{color:"danger"},i.a.createElement("strong",null,"Warning: "),"Error fetching metrics list: Unexpected response status when fetching metric names: ",D.message),i.a.createElement(ja,{panels:wt(window.location.search),useLocalTime:d,metrics:z.data,useExperimentalEditor:s,queryHistoryEnabled:b,enableAutocomplete:y,enableHighlighting:C,enableLinter:N}))},Ma=function(e){var t=e.headStats,a=e.labelValueCountByLabelName,n=e.seriesCountByMetricName,r=e.memoryInBytesByLabelName,o=e.seriesCountByLabelValuePair,l=function(e){try{return"".concat(new Date(e).toISOString()," (").concat(e,")")}catch(t){return 0===c?"No datapoints yet":"Error parsing time (".concat(e,")")}},s=t.chunkCount,c=t.numSeries,u=t.numLabelPairs,m=t.minTime,p=t.maxTime,d=[{header:"Number of Series",value:c},{header:"Number of Chunks",value:s},{header:"Number of Label Pairs",value:u},{header:"Current Min Time",value:"".concat(l(m))},{header:"Current Max Time",value:"".concat(l(p))}];return i.a.createElement("div",null,i.a.createElement("h2",null,"TSDB Status"),i.a.createElement("h3",{className:"p-2"},"Head Stats"),i.a.createElement("div",{className:"p-2"},i.a.createElement(G.a,{bordered:!0,size:"sm",striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,d.map((function(e){var t=e.header;return i.a.createElement("th",{key:t},t)})))),i.a.createElement("tbody",null,i.a.createElement("tr",null,d.map((function(e){var t=e.header,a=e.value;return i.a.createElement("td",{key:t},a)})))))),i.a.createElement("h3",{className:"p-2"},"Head Cardinality Stats"),[{title:"Top 10 label names with value count",stats:a},{title:"Top 10 series count by metric names",stats:n},{title:"Top 10 label names with high memory usage",unit:"Bytes",stats:r},{title:"Top 10 series count by label value pairs",stats:o}].map((function(e){var t=e.title,a=e.unit,n=void 0===a?"Count":a,r=e.stats;return i.a.createElement("div",{className:"p-2",key:t},i.a.createElement("h3",null,t),i.a.createElement(G.a,{bordered:!0,size:"sm",striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Name"),i.a.createElement("th",null,n))),i.a.createElement("tbody",null,r.map((function(e){var t=e.name,a=e.value;return i.a.createElement("tr",{key:t},i.a.createElement("td",null,t),i.a.createElement("td",null,a))})))))})))};Ma.displayName="TSDBStatusContent";var Na=V(Ma),La=function(){var e=k(),t=W("".concat(e,"/").concat("api/v1","/status/tsdb")),a=t.response,n=t.error,r=t.isLoading;return i.a.createElement(Na,Object.assign({error:n,isLoading:r},a.data,{componentTitle:"TSDB Status information"}))},Ia=a(320),_a=function(e){var t=e.status;return e.isUnexpected?i.a.createElement(U.a,{color:"danger"},i.a.createElement("strong",null,"Error:")," Server is not responding"):i.a.createElement("div",{className:"text-center m-3"},i.a.createElement("div",{className:"m-4"},i.a.createElement("h2",null,"Starting up..."),(null===t||void 0===t?void 0:t.max)>0?i.a.createElement("div",null,i.a.createElement("p",null,"Replaying WAL (",null===t||void 0===t?void 0:t.current,"/",null===t||void 0===t?void 0:t.max,")"),i.a.createElement(Ia.a,{animated:!0,value:(null===t||void 0===t?void 0:t.current)-(null===t||void 0===t?void 0:t.min)+1,min:null===t||void 0===t?void 0:t.min,max:(null===t||void 0===t?void 0:t.max)-(null===t||void 0===t?void 0:t.min)+1,color:(null===t||void 0===t?void 0:t.max)===(null===t||void 0===t?void 0:t.current)?"success":void 0,style:{width:"10%",margin:"auto"}})):null))},za=function(e){return function(t){var a=Object.assign({},t),n=function(e,t){var a=Object(o.useState)(!1),n=Object(c.a)(a,2),r=n[0],i=n[1],l=Object(o.useState)(!1),s=Object(c.a)(l,2),u=s[0],m=s[1],p=Object(o.useState)({}),d=Object(c.a)(p,2),h=d[0],f=d[1];return Object(o.useEffect)((function(){if(!H){var a=!0,n=function(){var n=Object(A.a)(F.a.mark((function n(){var o,l;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat(e,"/-/ready"),Object(P.a)({cache:"no-store",credentials:"same-origin"},t));case 3:if(200!==(o=n.sent).status){n.next=10;break}a&&i(!0),H=!0,clearInterval(r),n.next=25;break;case 10:if(503===o.status){n.next=16;break}return a&&m(!0),clearInterval(r),n.abrupt("return");case 16:return a&&m(!1),n.next=19,fetch("".concat(e,"/").concat("api/v1","/status/walreplay"),{cache:"no-store",credentials:"same-origin"});case 19:if(!(o=n.sent).ok){n.next=25;break}return n.next=23,o.json();case 23:l=n.sent,a&&f(l);case 25:n.next=32;break;case 27:return n.prev=27,n.t0=n.catch(0),a&&m(!0),clearInterval(r),n.abrupt("return");case 32:case"end":return n.stop()}}),n,null,[[0,27]])})));return function(){return n.apply(this,arguments)}}();n();var r=setInterval(n,1e3);return function(){clearInterval(r),a=!1}}i(!0)}),[e,t]),{ready:r,isUnexpected:u,walReplayStatus:h}}(k()),r=n.ready,l=n.walReplayStatus,s=n.isUnexpected;return r||s?i.a.createElement(e,a):i.a.createElement(_a,{isUnexpected:s,status:l.data})}},Da=za(Ht),Ra=za(Qt),Fa=za(Kt),Pa=za(ea),Aa=za(ia),Wa=za(ua),Ha=za(La),qa=za(Sa),Ua=za(Ta),Ba=function(e){var t=e.consolesLink,a=window.location.pathname,n=["/graph","/alerts","/status","/tsdb-status","/flags","/config","/rules","/targets","/service-discovery"];if(a.endsWith("/")&&(a=a.slice(0,-1)),a.length>1)for(var r=0;r<n.length;r++)if(a.endsWith(n[r])){a=a.slice(0,a.length-n[r].length);break}var o,l=Rt("user-prefers-color-scheme","auto"),s=Object(c.a)(l,2),m=s[0],p=s[1],d=D()("(prefers-color-scheme)"),h=D()("(prefers-color-scheme: dark)");return o="auto"!==m?m:d&&h?"dark":"light",i.a.createElement(T.Provider,{value:{theme:o,userPreference:m,setTheme:function(e){return p(e)}}},i.a.createElement(N,null),i.a.createElement(y.Provider,{value:a},i.a.createElement(I,{consolesLink:t}),i.a.createElement(_.a,{fluid:!0,style:{paddingTop:70}},i.a.createElement(u.c,{basepath:"".concat(a)},i.a.createElement(u.b,{from:"/",to:"graph",noThrow:!0}),i.a.createElement(Ua,{path:"/graph"}),i.a.createElement(Da,{path:"/alerts"}),i.a.createElement(Ra,{path:"/config"}),i.a.createElement(Fa,{path:"/flags"}),i.a.createElement(Pa,{path:"/rules"}),i.a.createElement(Aa,{path:"/service-discovery"}),i.a.createElement(Wa,{path:"/status"}),i.a.createElement(Ha,{path:"/tsdb-status"}),i.a.createElement(qa,{path:"/targets"})))))},Va=(a(290),a(291),a(292),a(293),GLOBAL_CONSOLES_LINK);"CONSOLES_LINK_PLACEHOLDER"!==GLOBAL_CONSOLES_LINK&&""!==GLOBAL_CONSOLES_LINK&&ht(GLOBAL_CONSOLES_LINK)||(Va=null),s.a.render(i.a.createElement(Ba,{consolesLink:Va}),document.getElementById("root"))},46:function(e,t,a){e.exports={container:"ScrapePoolPanel_container__2macm",title:"ScrapePoolPanel_title__1ppGj",normal:"ScrapePoolPanel_normal__1AuiN ScrapePoolPanel_title__1ppGj",danger:"ScrapePoolPanel_danger__ZoHk6 ScrapePoolPanel_title__1ppGj",table:"ScrapePoolPanel_table__1Sdr1",cell:"ScrapePoolPanel_cell__3LVb_",endpoint:"ScrapePoolPanel_endpoint__1N4gx ScrapePoolPanel_cell__3LVb_",labels:"ScrapePoolPanel_labels__1VVxb ScrapePoolPanel_cell__3LVb_",state:"ScrapePoolPanel_state__2BqDx ScrapePoolPanel_cell__3LVb_","last-scrape":"ScrapePoolPanel_last-scrape__192VK ScrapePoolPanel_cell__3LVb_",errors:"ScrapePoolPanel_errors__2JBvY ScrapePoolPanel_cell__3LVb_"}},93:function(e,t){},94:function(e,t){}},[[175,1,2]]]);
//# sourceMappingURL=main.d789395f.chunk.js.map